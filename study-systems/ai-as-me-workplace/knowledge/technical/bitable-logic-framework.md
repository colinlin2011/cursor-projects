# 多维表格逻辑框架设计

**创建日期**：2026-01-16  
**最后更新**：2026-01-16  
**目的**：整合FMEA在线表格到多维表格，实现三大视图的数据流闭环

---

## 一、现有表结构分析

### 1. 01. 架构元素表（89条记录）

**核心字段**：
- 元素名称（文本）
- 元素ID（超链接 → Polarion）
- 架构层级（单选）
- 元素类型（单选）
- 所属父元素（双向关联 → 架构元素表自身）
- 功能描述（文本）
- **非期待事件表**（双向关联 → 02. 非期待事件表）
- 被分配顶层安全需求（超链接）
- **所属功能清单**（双向关联 → 03. 子功能清单表）
- 负责人（人员）
- **FMEA分析状态**（单选）
- ASIL（单选）
- 最后更新日期（地理位置）
- 创建时间（自动编号）
- 父记录（关联）

**关键发现**：
- ✅ 已有双向关联到"非期待事件表"和"子功能清单表"
- ✅ 已有"FMEA分析状态"字段，可用于视图1
- ✅ 已有"ASIL"字段

### 2. 02. 非期待事件表（12条记录）

**核心字段**：
- UE Description（文本）
- UE ID（自动编号）
- **所属架构元素**（双向关联 → 01. 架构元素表）
- 元素类型（公式）
- ASIL（单选）
- 被分配顶层安全需求（公式）

**关键发现**：
- ✅ 已有双向关联到"架构元素表"
- ⚠️ 缺少关联到"失效模式影响分析表"（需要新增）

### 3. 03. 子功能清单表（160条记录）

**核心字段**：
- 功能描述（文本）
- **架构元素**（双向关联 → 01. 架构元素表）
- 所属父架构（公式）
- 功能ID（文本）
- 输出信号（文本）
- 输入信号（文本）
- 功能状态（单选）
- 分析责任人（人员）
- **失效模式分析表**（双向关联 → 04. 失效模式影响分析表）
- 最后更新时间（地理位置）
- 创建时间（自动编号）
- 04. 失效模式影响分析表 副本-关联功能（双向关联）

**关键发现**：
- ✅ 已有双向关联到"架构元素表"和"失效模式影响分析表"
- ✅ 已有"功能状态"字段，可用于视图1

### 4. 04. 失效模式影响分析表_HW（110条记录）

**核心字段**：
- 分析ID（自动编号）
- 所属父元素（公式）
- 架构元素（公式）
- **关联功能**（双向关联 → 03. 子功能清单表）
- 引导词（单选）
- 失效模式假设（公式）
- **实际识别的失效模式**（文本）
- 潜在失效影响（文本）
- 导致失效的原因（文本）
- SW_Safety Related（单选）
- **SW_UE**（关联 → 02. 非期待事件表）
- SPF(UE1)（单选）
- **安全机制(SPF)(UE1)**（关联 → 05. 安全机制表）
- LF(UE1)（单选）
- **安全机制（潜伏）(UE1)**（关联 → 05. 安全机制表）
- SPF (UE2)（单选）
- **安全机制(SPF) (UE2)**（双向关联 → 05. 安全机制表）
- LF (UE2)（单选）
- **安全机制（潜伏）(UE2)**（双向关联 → 05. 安全机制表）
- 分析状态（单选）
- 分析日期（日期）
- 分析责任人（人员）
- 频度(F)（单选）
- MSR有效性(M)（单选）
- 风险矩阵坐标（公式）

**关键发现**：
- ✅ 已有双向关联到"子功能清单表"和"安全机制表"
- ✅ 已有单向关联到"非期待事件表"
- ⚠️ 缺少关联到"安全需求总表"（通过Fault ID）
- ⚠️ 缺少关联到"缺陷问题闭环表"（用于视图3）

### 5. 04. 失效模式影响分析表_SW（0条记录）

**字段结构**：与HW表完全相同

**关键发现**：
- ⚠️ 目前为空表，需要从在线表格FMEA导入数据

### 6. 05. 安全机制表（36条记录）

**核心字段**：
- 安全机制ID（文本）
- **隶属架构元素**（关联 → 01. 架构元素表）
- 机制名称（文本）
- 机制描述（文本）
- 机制类型（单选）
- 设计层级（单选）
- SPF Diagnostic Coverage(in %)（数字）
- LF Diagnosic Coverage(in %)（文本）
- Transient SPF Diagnosic Coverage(in %)（文本）
- Transient LF Diagnosic Coverage(in %)（文本）
- **安全需求**（双向关联 → 06. 安全需求总表）
- 关联需求数量（公式）
- 备注（文本）
- **04. 失效模式影响分析表**（双向关联 → 04. 失效模式影响分析表，多个字段）

**关键发现**：
- ✅ 已有双向关联到"架构元素表"、"失效模式影响分析表"、"安全需求总表"
- ⚠️ 缺少视图2需要的字段：实现状态、上线版本、开关状态、稳定性指标等

---

## 二、逻辑关系图

### 现有关联关系

```
架构元素表 (01)
    ↕ (双向关联)
非期待事件表 (02)
    ↕ (双向关联)
子功能清单表 (03)
    ↕ (双向关联)
失效模式影响分析表_HW/SW (04)
    ↕ (双向关联)
安全机制表 (05)
    ↕ (双向关联)
安全需求总表 (06)
```

### 缺失的关联关系

```
失效模式影响分析表_HW/SW (04)
    ⚠️ 缺少 → 安全需求总表 (06) [通过Fault ID关联]
    ⚠️ 缺少 ↔ 缺陷问题闭环表 (10) [用于视图3]

安全机制表 (05)
    ⚠️ 缺少 ↔ 缺陷问题闭环表 (10) [用于视图3]
    ⚠️ 缺少 → 平台项目实施落地表 (07) [用于视图2]

缺陷问题闭环表 (10)
    ⚠️ 缺少 ↔ 失效模式影响分析表 (04) [用于视图3]
    ⚠️ 缺少 ↔ 安全机制表 (05) [用于视图3]
```

---

## 三、三大视图的数据组织

### 视图1：需求识别（理论态）- "分析了什么"

**数据来源**：
- 架构元素表 → 哪些架构元素被分析了（FMEA分析状态）
- 子功能清单表 → 哪些子功能被分析了（功能状态）
- 失效模式影响分析表_HW/SW → 分析了哪些失效模式（分析状态）
- 非期待事件表 → 识别了哪些非期待事件

**关键指标**：
- 架构元素覆盖率 = 已分析架构元素数 / 总架构元素数
- 子功能覆盖率 = 已分析子功能数 / 总子功能数
- 失效模式数量（按模块、按ASIL等级）
- 非期待事件数量

**视图设计**：
- 看板视图：按"FMEA分析状态"分组（未分析/分析中/已完成）
- 表格视图：按"架构层级"、"元素类型"、"ASIL"筛选
- 统计视图：显示覆盖率指标

### 视图2：实施落地（物理态）- "做到了没有"

**数据来源**：
- 安全机制表（核心）
- 平台项目实施落地表 (07)
- 客户项目实施落地表 (08)

**需要新增的字段（安全机制表）**：
- 实现状态（单选：未开始/开发中/测试中/已上线/已废弃）
- 上线版本（文本：版本号）
- 开关状态（单选：开启/关闭）
- 稳定性指标（数字：故障率、可用性等）
- 实施负责人（人员）
- 计划上线日期（日期）
- 实际上线日期（日期）
- 关联实施落地表（双向关联 → 07. 平台项目实施落地表）

**关键指标**：
- 安全机制实现率 = 已上线安全机制数 / 总安全机制数
- 按模块的实现状态分布
- 按ASIL等级的实现状态分布

**视图设计**：
- 看板视图：按"实现状态"分组
- 表格视图：按"机制类型"、"设计层级"筛选
- 时间线视图：显示实施进度

### 视图3：缺陷闭环（运行态）- "防住了吗"

**数据来源**：
- 缺陷问题闭环表 (10)
- 故障上报明细表 (09)
- 失效模式影响分析表_HW/SW (04)
- 安全机制表 (05)

**需要新增的关联字段**：

**失效模式影响分析表_HW/SW**：
- 关联缺陷问题（双向关联 → 10. 缺陷问题闭环表）

**安全机制表**：
- 关联缺陷问题（双向关联 → 10. 缺陷问题闭环表）

**缺陷问题闭环表**：
- 关联失效模式（双向关联 → 04. 失效模式影响分析表）
- 关联安全机制（双向关联 → 05. 安全机制表）
- FMEA匹配状态（单选：已匹配/未匹配/待分析）
- 安全机制有效性（单选：有效/无效/待验证）

**关键指标**：
- FMEA覆盖率 = 匹配FMEA的缺陷数 / 总缺陷数
- 安全机制有效性 = 安全机制生效的缺陷数 / 总缺陷数
- 漏检率 = 未在FMEA中识别的缺陷数 / 总缺陷数

**视图设计**：
- 看板视图：按"FMEA匹配状态"、"安全机制有效性"分组
- 表格视图：显示缺陷与FMEA的匹配情况
- 统计视图：显示FMEA质量指标

---

## 四、字段优化建议

### 4.1 失效模式影响分析表_HW/SW 需要新增的字段

1. **Fault ID**（文本）
   - 作用：关联到"安全需求总表"的Fault ID
   - 格式：0x0165、0x165等

2. **关联安全需求**（双向关联 → 06. 安全需求总表）
   - 作用：通过Fault ID自动关联

3. **关联缺陷问题**（双向关联 → 10. 缺陷问题闭环表）
   - 作用：用于视图3，验证FMEA质量

4. **原始FMEA表格**（单选）
   - 作用：标识数据来源（如"10_Planning_System_SW_FMEA"）
   - 选项：从在线表格FMEA的29个表格中选择

5. **FMEA类型**（单选）
   - 作用：标识FMEA类型
   - 选项：Concept FMEA、System SW FMEA、HW FMEA、DFA

### 4.2 安全机制表 需要新增的字段

1. **实现状态**（单选）
   - 选项：未开始、开发中、测试中、已上线、已废弃
   - 作用：视图2的核心字段

2. **上线版本**（文本）
   - 作用：记录安全机制上线的版本号

3. **开关状态**（单选）
   - 选项：开启、关闭
   - 作用：记录安全机制的当前状态

4. **稳定性指标**（数字）
   - 作用：记录故障率、可用性等指标

5. **实施负责人**（人员）
   - 作用：记录实施责任人

6. **计划上线日期**（日期）
   - 作用：计划时间线

7. **实际上线日期**（日期）
   - 作用：实际时间线

8. **关联实施落地表**（双向关联 → 07. 平台项目实施落地表）
   - 作用：关联到实施落地记录

9. **关联缺陷问题**（双向关联 → 10. 缺陷问题闭环表）
   - 作用：用于视图3，验证安全机制有效性

### 4.3 缺陷问题闭环表 需要新增的字段

1. **关联失效模式**（双向关联 → 04. 失效模式影响分析表）
   - 作用：标识缺陷是否匹配FMEA中的失效模式

2. **关联安全机制**（双向关联 → 05. 安全机制表）
   - 作用：标识缺陷发生时，相关安全机制是否生效

3. **FMEA匹配状态**（单选）
   - 选项：已匹配、未匹配、待分析
   - 作用：标识缺陷是否在FMEA中已识别

4. **安全机制有效性**（单选）
   - 选项：有效、无效、待验证
   - 作用：标识安全机制是否有效

5. **关联非期待事件**（双向关联 → 02. 非期待事件表）
   - 作用：标识缺陷是否导致非期待事件

---

## 五、数据流闭环设计

### 5.1 正向流程（设计阶段）

```
架构元素表
    ↓ (包含)
子功能清单表
    ↓ (可能产生)
非期待事件表
    ↓ (通过分析)
失效模式影响分析表_HW/SW
    ↓ (需要)
安全机制表
    ↓ (实现)
平台项目实施落地表
```

### 5.2 反向流程（问题处理阶段）

```
缺陷问题闭环表
    ↑ (回溯)
失效模式影响分析表_HW/SW
    ↑ (回溯)
安全机制表
    ↑ (回溯)
非期待事件表
```

### 5.3 闭环反馈

```
工程反馈（缺陷/问题）
    ↓
视图3：缺陷闭环（运行态）
    ↓ 识别FMEA遗漏
视图1：需求识别（理论态）
    ↓ 更新FMEA
失效模式影响分析表_HW/SW
    ↓ 需要新的安全机制
视图2：实施落地（物理态）
    ↓ 实施安全机制
工程反馈（验证效果）
```

---

## 六、下一步行动

### 阶段1：字段优化（优先级高）

1. **失效模式影响分析表_HW/SW**：
   - 新增"Fault ID"字段
   - 新增"关联安全需求"字段（双向关联）
   - 新增"关联缺陷问题"字段（双向关联）
   - 新增"原始FMEA表格"字段（单选）
   - 新增"FMEA类型"字段（单选）

2. **安全机制表**：
   - 新增"实现状态"字段（单选）
   - 新增"上线版本"字段（文本）
   - 新增"开关状态"字段（单选）
   - 新增"稳定性指标"字段（数字）
   - 新增"实施负责人"字段（人员）
   - 新增"计划上线日期"、"实际上线日期"字段（日期）
   - 新增"关联实施落地表"字段（双向关联）
   - 新增"关联缺陷问题"字段（双向关联）

3. **缺陷问题闭环表**：
   - 新增"关联失效模式"字段（双向关联）
   - 新增"关联安全机制"字段（双向关联）
   - 新增"FMEA匹配状态"字段（单选）
   - 新增"安全机制有效性"字段（单选）
   - 新增"关联非期待事件"字段（双向关联）

### 阶段2：数据迁移（优先级中）

1. 从在线表格FMEA提取数据
2. 映射到"失效模式影响分析表_SW"（目前为空）
3. 建立关联关系

### 阶段3：视图设计（优先级中）

1. 设计视图1的看板、表格、统计视图
2. 设计视图2的看板、表格、时间线视图
3. 设计视图3的看板、表格、统计视图

### 阶段4：自动化规则（优先级低）

1. 自动关联规则（基于Fault ID）
2. 自动状态更新规则
3. 自动通知规则

---

## 七、能解决什么，不能解决什么

### 能解决的问题

1. ✅ **FMEA数据结构化**：将Excel中的FMEA数据整合到多维表格
2. ✅ **分析状态可视化**：通过视图1，清晰看到分析状态
3. ✅ **实施状态追踪**：通过视图2，追踪安全机制实施进度
4. ✅ **质量验证闭环**：通过视图3，用真实缺陷验证FMEA质量
5. ✅ **数据关联查询**：从缺陷快速回溯到FMEA、安全机制、安全需求

### 不能解决的问题

1. ❌ **FMEA分析本身**：不能替代FMEA分析过程
2. ❌ **安全机制设计**：不能替代安全机制的设计
3. ❌ **自动化测试**：不能替代自动化测试
4. ❌ **实时监控**：不能替代实时监控系统
5. ❌ **复杂计算**：复杂的安全分析计算需要在外部工具中进行

---

**最后更新**：2026-01-16
