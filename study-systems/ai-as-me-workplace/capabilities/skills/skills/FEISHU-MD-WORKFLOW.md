# 飞书文档与Markdown协作工作流程

## 工作流程概述

```
本地Markdown编辑 ←→ 同步脚本 ←→ 飞书文档
```

## 快速开始

### 1. 从飞书读取到本地（首次使用）

如果飞书文档已有内容，先同步到本地：

```bash
python feishu_to_md.py
```

这会将飞书文档内容读取并保存到：`work/fsc-doc/舱驾一体域控的FSC文档.md`

### 2. 在本地Markdown中编辑

直接在本地Markdown文件中编辑内容，支持：

- **标题**：`# 标题1`、`## 标题2`、`### 标题3`、`#### 标题4`
- **文本**：普通段落文本
- **列表**：`- 列表项`（无序列表）、`1. 列表项`（有序列表）
- **粗体**：`**粗体文本**`（会转换为普通文本）

### 3. 同步到飞书

编辑完成后，同步到飞书：

```bash
python sync_md_to_feishu.py
```

脚本会：
1. 读取本地Markdown文件
2. 解析为飞书文档块
3. 清空飞书文档现有内容
4. 添加Markdown内容

## 文件说明

### 本地文件

- **Markdown文件**：`work/fsc-doc/舱驾一体域控的FSC文档.md`
  - 这是你的主要工作文件
  - 可以随时编辑，不受网络限制
  - 支持版本控制（Git）

### 同步脚本

- **`feishu_to_md.py`**：从飞书读取内容到本地Markdown
- **`sync_md_to_feishu.py`**：从本地Markdown同步到飞书

## 使用场景

### 场景1：日常编辑

1. 在本地Markdown文件中编辑
2. 编辑完成后运行 `sync_md_to_feishu.py` 同步
3. 在飞书中查看最终效果

### 场景2：从飞书开始

1. 运行 `feishu_to_md.py` 读取飞书内容到本地
2. 在本地Markdown中编辑
3. 运行 `sync_md_to_feishu.py` 同步回飞书

### 场景3：协作编辑

1. 团队成员在飞书中编辑
2. 定期运行 `feishu_to_md.py` 同步到本地
3. 在本地进行批量编辑或格式调整
4. 运行 `sync_md_to_feishu.py` 同步回飞书

## 优势

1. **快速编辑**：本地Markdown编辑，无需等待API调用
2. **版本控制**：Markdown文件可以用Git管理
3. **离线工作**：不依赖网络，随时可以编辑
4. **批量操作**：可以批量修改、查找替换等
5. **格式统一**：Markdown格式清晰，易于阅读和编辑

## 注意事项

1. **清空现有内容**：`sync_md_to_feishu.py` 默认会清空飞书文档现有内容
2. **格式转换**：复杂格式（表格、代码块、链接等）可能无法完美转换
3. **冲突处理**：如果飞书文档被其他人编辑，同步前建议先读取最新内容
4. **备份**：重要内容建议定期备份本地Markdown文件

## 未来改进

- [ ] 支持增量同步（只更新变化的部分）
- [ ] 支持冲突检测和合并
- [ ] 支持更多Markdown元素（表格、代码块、链接等）
- [ ] 支持双向实时同步
