# é£ä¹¦èµ„æºç»Ÿä¸€é…ç½®æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æŒ‡å—ä»‹ç»å¦‚ä½•ä½¿ç”¨ç»Ÿä¸€çš„é…ç½®æ–‡ä»¶ç®¡ç†é£ä¹¦çš„ä¸‰ç§èµ„æºç±»å‹ï¼š
- **äº‘æ–‡æ¡£ï¼ˆDocumentsï¼‰**ï¼šé£ä¹¦Wikiæ–‡æ¡£
- **å¤šç»´è¡¨æ ¼ï¼ˆBitablesï¼‰**ï¼šé£ä¹¦å¤šç»´è¡¨æ ¼
- **åœ¨çº¿è¡¨æ ¼ï¼ˆSpreadsheetsï¼‰**ï¼šé£ä¹¦åœ¨çº¿è¡¨æ ¼

## ğŸ¯ ç»Ÿä¸€é…ç½®æ–‡ä»¶

**é…ç½®æ–‡ä»¶ä½ç½®**ï¼š`work/feishu_resources_config.json`

è¿™æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„JSONé…ç½®æ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰é£ä¹¦èµ„æºçš„é…ç½®ä¿¡æ¯ã€‚

## ğŸ“ é…ç½®æ–‡ä»¶ç»“æ„

```json
{
  "version": "1.0",
  "description": "é£ä¹¦èµ„æºç»Ÿä¸€é…ç½®æ–‡ä»¶",
  "last_updated": "2026-01-17",
  
  "documents": {
    "description": "é£ä¹¦äº‘æ–‡æ¡£é…ç½®",
    "cache_dir": "work/fault_diagnosis_cache/guides",
    "sync_script": "sync_fault_guides.py",
    "items": [...]
  },
  
  "bitables": {
    "description": "é£ä¹¦å¤šç»´è¡¨æ ¼é…ç½®",
    "cache_dir": "work/bitable_cache",
    "sync_script": "auto_sync_bitable.py",
    "items": [...]
  },
  
  "spreadsheets": {
    "description": "é£ä¹¦åœ¨çº¿è¡¨æ ¼é…ç½®",
    "cache_dir": "work/spreadsheet_cache",
    "sync_script": "auto_sync_spreadsheet.py",
    "items": [...]
  }
}
```

## ğŸ”§ èµ„æºé¡¹é…ç½®æ ¼å¼

### é€šç”¨å­—æ®µï¼ˆæ‰€æœ‰èµ„æºç±»å‹ï¼‰

```json
{
  "id": "å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆå¦‚ doc_001, bitable_001ï¼‰",
  "name": "èµ„æºæ˜¾ç¤ºåç§°",
  "node_token": "ä»URLä¸­æå–çš„node_tokenï¼ˆWikiæ–‡æ¡£å’Œå¤šç»´è¡¨æ ¼ï¼‰",
  "app_token": "å¤šç»´è¡¨æ ¼çš„app_tokenï¼ˆä»…å¤šç»´è¡¨æ ¼ï¼‰",
  "url": "å®Œæ•´çš„èµ„æºURL",
  "cache_file": "ç¼“å­˜æ–‡ä»¶åï¼ˆå¯é€‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆï¼‰",
  "category": "åˆ†ç±»æ ‡ç­¾ï¼ˆç”¨äºç»„ç»‡å’Œç®¡ç†ï¼‰",
  "enabled": true,
  "sync_interval_hours": 24,
  "description": "èµ„æºæè¿°"
}
```

### äº‘æ–‡æ¡£ï¼ˆDocumentsï¼‰ç‰¹å®šå­—æ®µ

```json
{
  "id": "doc_001",
  "name": "æ–‡æ¡£åç§°",
  "node_token": "ä»URLä¸­æå–çš„node_token",
  "url": "https://zyt.feishu.cn/wiki/{node_token}",
  "cache_file": "guide_{node_token}.json",
  "category": "åˆ†ç±»æ ‡ç­¾",
  "enabled": true,
  "sync_interval_hours": 24,
  "description": "æ–‡æ¡£æè¿°"
}
```

### å¤šç»´è¡¨æ ¼ï¼ˆBitablesï¼‰ç‰¹å®šå­—æ®µ

```json
{
  "id": "bitable_001",
  "name": "è¡¨æ ¼åç§°",
  "node_token": "ä»URLä¸­æå–çš„node_tokenï¼ˆWikiä¸­çš„å¤šç»´è¡¨æ ¼ï¼‰",
  "app_token": "å¤šç»´è¡¨æ ¼çš„app_tokenï¼ˆæ–‡ä»¶å¤¹ä¸­çš„å¤šç»´è¡¨æ ¼ï¼‰",
  "url": "https://zyt.feishu.cn/wiki/{node_token} æˆ– https://zyt.feishu.cn/base/{app_token}",
  "cache_file": "ç¼“å­˜æ–‡ä»¶å.json",
  "category": "åˆ†ç±»æ ‡ç­¾",
  "enabled": true,
  "sync_interval_hours": 24,
  "description": "è¡¨æ ¼æè¿°"
}
```

### åœ¨çº¿è¡¨æ ¼ï¼ˆSpreadsheetsï¼‰ç‰¹å®šå­—æ®µ

```json
{
  "id": "spreadsheet_001",
  "name": "è¡¨æ ¼åç§°",
  "node_token": "ä»URLä¸­æå–çš„node_token",
  "url": "https://zyt.feishu.cn/wiki/{node_token}",
  "cache_file": "spreadsheet_example.json",
  "category": "åˆ†ç±»æ ‡ç­¾",
  "enabled": true,
  "sync_interval_hours": 24,
  "description": "è¡¨æ ¼æè¿°"
}
```

## ğŸš€ å¿«é€Ÿæ·»åŠ æ–°èµ„æº

### æ­¥éª¤1ï¼šè·å–èµ„æºä¿¡æ¯

#### äº‘æ–‡æ¡£ï¼ˆWikiæ–‡æ¡£ï¼‰
ä»URLä¸­æå– `node_token`ï¼š
```
https://zyt.feishu.cn/wiki/{node_token}
ä¾‹å¦‚ï¼šhttps://zyt.feishu.cn/wiki/SyYZwtflPi1on7kpf8KcachBnnh
node_token = SyYZwtflPi1on7kpf8KcachBnnh
```

#### å¤šç»´è¡¨æ ¼ï¼ˆWikiä¸­çš„å¤šç»´è¡¨æ ¼ï¼‰
ä»URLä¸­æå– `node_token`ï¼š
```
https://zyt.feishu.cn/wiki/{node_token}
ä¾‹å¦‚ï¼šhttps://zyt.feishu.cn/wiki/CGMnwhxzLixWhGk87jYcDRfonsh
node_token = CGMnwhxzLixWhGk87jYcDRfonsh
```

#### å¤šç»´è¡¨æ ¼ï¼ˆæ–‡ä»¶å¤¹ä¸­çš„å¤šç»´è¡¨æ ¼ï¼‰
ä»URLä¸­æå– `app_token`ï¼š
```
https://zyt.feishu.cn/base/{app_token}
ä¾‹å¦‚ï¼šhttps://zyt.feishu.cn/base/YWDGbSZZKalcnQskTThcSUSXnub
app_token = YWDGbSZZKalcnQskTThcSUSXnub
```

#### åœ¨çº¿è¡¨æ ¼
ä»URLä¸­æå– `node_token`ï¼š
```
https://zyt.feishu.cn/wiki/{node_token}
ä¾‹å¦‚ï¼šhttps://zyt.feishu.cn/wiki/TDlnwRfpBikbUIk5guDcRyN5neh
node_token = TDlnwRfpBikbUIk5guDcRyN5neh
```

### æ­¥éª¤2ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ 

ç¼–è¾‘ `work/feishu_resources_config.json`ï¼Œåœ¨å¯¹åº”çš„ `items` æ•°ç»„ä¸­æ·»åŠ æ–°é…ç½®ï¼š

#### æ·»åŠ äº‘æ–‡æ¡£ç¤ºä¾‹

```json
{
  "documents": {
    "items": [
      // ... ç°æœ‰æ–‡æ¡£ ...
      {
        "id": "doc_003",
        "name": "æ–°æ–‡æ¡£åç§°",
        "node_token": "æ–°æ–‡æ¡£çš„node_token",
        "url": "https://zyt.feishu.cn/wiki/æ–°æ–‡æ¡£çš„node_token",
        "cache_file": "guide_æ–°æ–‡æ¡£çš„node_token.json",
        "category": "åˆ†ç±»æ ‡ç­¾",
        "enabled": true,
        "sync_interval_hours": 24,
        "description": "æ–‡æ¡£æè¿°"
      }
    ]
  }
}
```

#### æ·»åŠ å¤šç»´è¡¨æ ¼ç¤ºä¾‹

```json
{
  "bitables": {
    "items": [
      // ... ç°æœ‰è¡¨æ ¼ ...
      {
        "id": "bitable_004",
        "name": "æ–°å¤šç»´è¡¨æ ¼",
        "node_token": "æ–°è¡¨æ ¼çš„node_token",
        "url": "https://zyt.feishu.cn/wiki/æ–°è¡¨æ ¼çš„node_token",
        "cache_file": "new_bitable.json",
        "category": "åˆ†ç±»æ ‡ç­¾",
        "enabled": true,
        "sync_interval_hours": 24,
        "description": "è¡¨æ ¼æè¿°"
      }
    ]
  }
}
```

#### æ·»åŠ åœ¨çº¿è¡¨æ ¼ç¤ºä¾‹

```json
{
  "spreadsheets": {
    "items": [
      // ... ç°æœ‰è¡¨æ ¼ ...
      {
        "id": "spreadsheet_002",
        "name": "æ–°åœ¨çº¿è¡¨æ ¼",
        "node_token": "æ–°è¡¨æ ¼çš„node_token",
        "url": "https://zyt.feishu.cn/wiki/æ–°è¡¨æ ¼çš„node_token",
        "cache_file": "new_spreadsheet.json",
        "category": "åˆ†ç±»æ ‡ç­¾",
        "enabled": true,
        "sync_interval_hours": 24,
        "description": "è¡¨æ ¼æè¿°"
      }
    ]
  }
}
```

### æ­¥éª¤3ï¼šåŒæ­¥èµ„æº

#### åŒæ­¥äº‘æ–‡æ¡£
```bash
cd capabilities/skills/skills
python sync_fault_guides.py
```

#### åŒæ­¥å¤šç»´è¡¨æ ¼
```bash
cd capabilities/skills/skills
python auto_sync_bitable.py --once
```

#### åŒæ­¥åœ¨çº¿è¡¨æ ¼
```bash
cd capabilities/skills/skills
python auto_sync_spreadsheet.py --once
```

#### åŒæ­¥æ‰€æœ‰èµ„æº
```bash
cd capabilities/skills/skills
python auto_sync_all.py --once
```

## ğŸ“Š é…ç½®æ–‡ä»¶å­—æ®µè¯´æ˜

### é€šç”¨å­—æ®µ

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `id` | string | âœ… | å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå»ºè®®æ ¼å¼ï¼š`{type}_{åºå·}`ï¼ˆå¦‚ `doc_001`, `bitable_001`ï¼‰ |
| `name` | string | âœ… | èµ„æºæ˜¾ç¤ºåç§° |
| `node_token` | string | âš ï¸ | ä»URLä¸­æå–çš„node_tokenï¼ˆWikiæ–‡æ¡£å’Œå¤šç»´è¡¨æ ¼å¿…å¡«ï¼‰ |
| `app_token` | string | âš ï¸ | å¤šç»´è¡¨æ ¼çš„app_tokenï¼ˆæ–‡ä»¶å¤¹ä¸­çš„å¤šç»´è¡¨æ ¼å¿…å¡«ï¼‰ |
| `url` | string | âœ… | å®Œæ•´çš„èµ„æºURL |
| `cache_file` | string | âŒ | ç¼“å­˜æ–‡ä»¶åï¼ˆå¯é€‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆï¼‰ |
| `category` | string | âŒ | åˆ†ç±»æ ‡ç­¾ï¼Œç”¨äºç»„ç»‡å’Œç®¡ç† |
| `enabled` | boolean | âŒ | æ˜¯å¦å¯ç”¨ï¼ˆé»˜è®¤ï¼štrueï¼‰ |
| `sync_interval_hours` | number | âŒ | åŒæ­¥é—´éš”ï¼ˆå°æ—¶ï¼Œé»˜è®¤ï¼š24ï¼‰ |
| `description` | string | âŒ | èµ„æºæè¿° |

### ç‰¹æ®Šå­—æ®µ

- **å¤šç»´è¡¨æ ¼**ï¼šå¦‚æœæ˜¯ä»æ–‡ä»¶å¤¹ä¸­çš„å¤šç»´è¡¨æ ¼ï¼Œä½¿ç”¨ `app_token` è€Œä¸æ˜¯ `node_token`
- **ç¼“å­˜æ–‡ä»¶**ï¼šå¦‚æœä¸æŒ‡å®š `cache_file`ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆï¼ˆæ ¼å¼ï¼š`guide_{node_token}.json` æˆ– `{name}.json`ï¼‰

## ğŸ” æŸ¥çœ‹å·²é…ç½®çš„èµ„æº

### æ–¹æ³•1ï¼šæŸ¥çœ‹é…ç½®æ–‡ä»¶

ç›´æ¥æŸ¥çœ‹ `work/feishu_resources_config.json` æ–‡ä»¶ã€‚

### æ–¹æ³•2ï¼šä½¿ç”¨é…ç½®æŸ¥çœ‹å·¥å…·

```bash
cd capabilities/skills/skills
python view_feishu_config.py
```

ï¼ˆéœ€è¦åˆ›å»ºæ­¤å·¥å…·ï¼‰

## ğŸ› ï¸ é…ç½®ç®¡ç†æœ€ä½³å®è·µ

### 1. IDå‘½åè§„èŒƒ

- **äº‘æ–‡æ¡£**ï¼š`doc_001`, `doc_002`, ...
- **å¤šç»´è¡¨æ ¼**ï¼š`bitable_001`, `bitable_002`, ...
- **åœ¨çº¿è¡¨æ ¼**ï¼š`spreadsheet_001`, `spreadsheet_002`, ...

### 2. åˆ†ç±»æ ‡ç­¾å»ºè®®

- **æ•…éšœå®šä½æŒ‡å¼•**ï¼šç”¨äºæ•…éšœå®šä½ç›¸å…³æ–‡æ¡£
- **ç»„ç»‡ç®¡ç†**ï¼šç”¨äºç»„ç»‡æ¶æ„ã€ä¸šåŠ¡æ¶æ„ç­‰æ–‡æ¡£
- **ä¸ªäººè®°å½•**ï¼šç”¨äºä¸ªäººå·¥ä½œè®°å½•
- **äººåŠ›èµ„æº**ï¼šç”¨äºäººåŠ›ç›˜ç‚¹ç­‰è¡¨æ ¼
- **ä¸šåŠ¡æ•°æ®**ï¼šç”¨äºä¸šåŠ¡æ•°æ®è¡¨æ ¼
- **å†å²æ•°æ®**ï¼šç”¨äºå†å²æ•°æ®è¡¨æ ¼

### 3. å¯ç”¨/ç¦ç”¨èµ„æº

é€šè¿‡è®¾ç½® `enabled: false` å¯ä»¥ä¸´æ—¶ç¦ç”¨æŸä¸ªèµ„æºï¼Œè€Œä¸åˆ é™¤é…ç½®ï¼š

```json
{
  "id": "doc_001",
  "name": "æ–‡æ¡£åç§°",
  "enabled": false,  // ç¦ç”¨æ­¤èµ„æº
  ...
}
```

### 4. è‡ªå®šä¹‰åŒæ­¥é—´éš”

å¯ä»¥ä¸ºä¸åŒèµ„æºè®¾ç½®ä¸åŒçš„åŒæ­¥é—´éš”ï¼š

```json
{
  "id": "doc_001",
  "name": "é‡è¦æ–‡æ¡£",
  "sync_interval_hours": 12,  // æ¯12å°æ—¶åŒæ­¥ä¸€æ¬¡
  ...
}
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **å¤šç»´è¡¨æ ¼å¿«é€Ÿæ·»åŠ **ï¼š`å¿«é€Ÿæ·»åŠ æ–°è¡¨æ ¼.md`
- **æ–‡æ¡£å¿«é€Ÿæ·»åŠ **ï¼š`æ•…éšœå®šä½ç³»ç»Ÿé…ç½®è¯´æ˜.md`
- **åœ¨çº¿è¡¨æ ¼ç¼“å­˜**ï¼š`SPREADSHEET-CACHE-GUIDE.md`
- **å·¥å…·é‡ç”¨åŸåˆ™**ï¼šè§ CURSOR.md "å·¥å…·é‡ç”¨åŸåˆ™"ç« èŠ‚

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é…ç½®æ–‡ä»¶æ ¼å¼**ï¼šç¡®ä¿JSONæ ¼å¼æ­£ç¡®ï¼Œå¯ä»¥ä½¿ç”¨JSONéªŒè¯å·¥å…·æ£€æŸ¥
2. **IDå”¯ä¸€æ€§**ï¼šç¡®ä¿æ¯ä¸ªèµ„æºçš„IDåœ¨åŒç±»èµ„æºä¸­å”¯ä¸€
3. **URLæ ¼å¼**ï¼šç¡®ä¿URLæ ¼å¼æ­£ç¡®ï¼Œå¯ä»¥ä»æµè§ˆå™¨åœ°å€æ å¤åˆ¶
4. **node_tokenæå–**ï¼šç¡®ä¿æ­£ç¡®æå–node_tokenæˆ–app_token
5. **ç¼“å­˜æ–‡ä»¶å‘½å**ï¼šå»ºè®®ä½¿ç”¨è‹±æ–‡å‘½åï¼Œé¿å…ç‰¹æ®Šå­—ç¬¦

## ğŸ”„ å‘åå…¼å®¹

ç°æœ‰çš„é…ç½®æ–‡ä»¶ä»ç„¶æœ‰æ•ˆï¼š
- `work/fault_diagnosis_guides_config.json` - æ–‡æ¡£é…ç½®ï¼ˆå·²è¿ç§»åˆ°ç»Ÿä¸€é…ç½®ï¼‰
- `bitable_cache_manager.py` ä¸­çš„ `BITABLE_CONFIGS` - å¤šç»´è¡¨æ ¼é…ç½®ï¼ˆå»ºè®®è¿ç§»ï¼‰
- `spreadsheet_cache_manager.py` ä¸­çš„ `SPREADSHEET_CONFIGS` - åœ¨çº¿è¡¨æ ¼é…ç½®ï¼ˆå»ºè®®è¿ç§»ï¼‰

ç³»ç»Ÿä¼šä¼˜å…ˆè¯»å–ç»Ÿä¸€é…ç½®æ–‡ä»¶ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™å›é€€åˆ°åŸæœ‰é…ç½®æ–¹å¼ã€‚

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šæ·»åŠ æ–°çš„äº‘æ–‡æ¡£

```json
{
  "documents": {
    "items": [
      {
        "id": "doc_003",
        "name": "æ–°æ–‡æ¡£",
        "node_token": "NewNodeToken123",
        "url": "https://zyt.feishu.cn/wiki/NewNodeToken123",
        "category": "æ–°åˆ†ç±»",
        "enabled": true,
        "sync_interval_hours": 24,
        "description": "è¿™æ˜¯ä¸€ä¸ªæ–°æ–‡æ¡£"
      }
    ]
  }
}
```

ç„¶åè¿è¡Œï¼š
```bash
python sync_fault_guides.py
```

### ç¤ºä¾‹2ï¼šæ·»åŠ æ–°çš„å¤šç»´è¡¨æ ¼

```json
{
  "bitables": {
    "items": [
      {
        "id": "bitable_004",
        "name": "æ–°å¤šç»´è¡¨æ ¼",
        "node_token": "NewBitableToken456",
        "url": "https://zyt.feishu.cn/wiki/NewBitableToken456",
        "cache_file": "new_bitable.json",
        "category": "ä¸šåŠ¡æ•°æ®",
        "enabled": true,
        "sync_interval_hours": 24,
        "description": "æ–°çš„ä¸šåŠ¡æ•°æ®è¡¨æ ¼"
      }
    ]
  }
}
```

ç„¶åè¿è¡Œï¼š
```bash
python auto_sync_bitable.py --once
```

---

**æç¤º**ï¼šç»Ÿä¸€é…ç½®æ–‡ä»¶è®©èµ„æºç®¡ç†æ›´åŠ æ¸…æ™°å’Œé«˜æ•ˆï¼Œå»ºè®®å°†æ‰€æœ‰èµ„æºè¿ç§»åˆ°ç»Ÿä¸€é…ç½®ä¸­ã€‚
