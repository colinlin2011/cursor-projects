批量更新工作项字段值

该接口用于批量更新指定空间和工作项类型下的多个工作项实例，可修改字段可以从 [获取创建工作项元数据](../1p8d7djs/2jhqmwhn) 接口中获取，批量修改仅支持部分类型字段修改，具体支持类型见接口说明。该接口对应的权限申请在权限管理-工作项实例分类下，相关功能介绍详见 [权限管理](../1p8d7djs/5bkub0oc)。​

注意事项​

  * 此接口 QPS 限制为1，需合理使用。​



请求说明​

  * 请求方式：POST​



  * 请求地址：/open_api/work_item/batch_update​



请求参数​

Header​

接口调用的 Header 配置详见 [Header](../1p8d7djs/4bsmoql6#a8e43b86)。​

Body​

​

参数| 类型| 是否必须| 说明  
---|---|---|---  
project_key| string| 必须| 飞书项目空间的唯一标识符，双击空间名称获取。  
work_item_ids| list<int64>| 必须| 工作项 ID 列表，一次请求最大 50 个。  
work_item_type_key| string| 必须| 工作项类型，可以从[获取空间下工作项类型](../1p8d7djs/3pjp854w)接口获取。  
update_mode| string| 必须| 本次批量操作的更新方式，支持的取值如下所示。

  * APPEND：追加，仅支持 多选人员、多选、多选关联工作项（非级联）三种字段类型；
  * UPDATE：覆盖，不支持 计算字段、系统外信号字段类型；
  * REPLACE：替换，仅支持 单选、级联单选、多选、单选按钮、单选人员、多选人员、单选关联工作项、多选关联工作项（非级联）。

  
field_key| string| 必须| 待修改字段 ID，批量修改仅支持单个字段修改（可修改字段类型见 update_mode 参数说明）。  
before_field_value| file| 可选| 被替换的字段值（当 update_mode=REPLACE 时必填，其余情况下忽略）。  
after_field_value| file| 必须| 操作类型的目标字段值，可参考[字段与属性解析格式](../1p8d7djs/1tj6ggll)。  
说明：

  * 允许 field_value 为空，等价于删除。

  
  
​

返回参数​

​

参数| 类型| 说明  
---|---|---  
task_id| string| 任务 ID，用于[获取批量更新处理进度](../1p8d7djs/u3szcu4r)。  
err| object| 请求成功时返回空值，请求失败时返回实际错误信息。  
err_msg| string| 请求成功时返回空值，请求失败时返回实际错误信息。  
err_code| int32| 请求成功时返回0，请求失败返回实际错误码。  
  
​

请求示例​

追加批量操作请求示例

覆盖批量操作请求示例

替换批量操作请求示例

update_mode="APPEND"​

​

JSON

复制

POST /open_api/work_item/batch_update​

{​

"project_key": "668f9e4e7aa71af7f35d****",//空间 ID​

"work_item_type_key": "story",//工作项类型​

"work_item_ids": [​

462042****,​

461795****,​

461669****​

],//批量操作的工作项列表​

"update_mode": "APPEND",//更新类型：新增​

"field_key": "field_f5ed1b", //字段 key​

"before_field_value": null,​

"after_field_value": [​

{​

"value": "wce_sbl16",​

"label": "选项1"​

}​

]//新增值，多选字段类型​

}

​

​

返回示例​

追加批量操作返回示例

覆盖批量操作返回示例

替换批量操作返回示例

错误返回示例

​

JSON

复制

{​

"err": {},​

"err_code": 0,​

"err_msg": "",​

"data": {​

"task_id": "WORK_ITEM_BATCH_UPDATE-739994390327202****" //任务 ID​

}​

}

​

​

错误码​

以下列出了该接口相关的错误码信息，若需查看更多通用错误码说明，参见 [Open API 错误码](../1p8d7djs/5aueo3jr)。​

​

err_code| err_msg| err.code| err.msg| 说明  
---|---|---|---|---  
1000052062| Project Key Is Wrong| 1000052062| Project Key Is Wrong| 传入的 project_key 不正确。  
50006| ErrOAPIBatchUpdateOverLimit| 50006| The quantity of single batch updates exceeds the limit| 批量更新工作项时，单次请求的工作项 ID 数量超过限制的错误码。单次请求最多支持 50个工作项。  
  
​

上一篇

更新工作项

下一篇

获取批量更新处理进度
