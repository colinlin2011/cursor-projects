获取用户详情

该接口用于获取指定用户的详细信息。对应的权限申请在权限管理-用户分类下，相关功能介绍详见​权限管理。常见问题可参考​用户与空间。​

注意事项​

使用虚拟 Token 查询用户信息时，只有插件的协作者能被查到。若要查询其他用户，请使用正式 Token。​

请求说明​

  * 请求方式：POST​



  * 请求地址：/open_api/user/query​



请求参数​

Header​

接口调用的 Header 配置详见 [Header](../1p8d7djs/4bsmoql6#a8e43b86)。​

说明：此接口使用插件访问凭证（plugin_access_token）时，无需传 X-User-Key。​

Body​

​

参数| 类型| 是否必须| 说明  
---|---|---|---  
user_keys| list<string>| 可选| 飞书项目 user_key 的数组。

  * 开发者自己的 user_key，在飞书项目空间左下角双击个人头像获取。
  * 租户内其他成员的 user_key，请通过[搜索租户内的用户列表](../1p8d7djs/4cxu45fl)接口获取。

**说明：请求体参数 user_keys、out_ids、emails 至少填一个（最多一次可查询100个）。**  
out_ids| list<string>| 可选| 飞书开放平台 UnionId 的数组，用于标识用户在同一应用服务商所开发的多个应用中的统一身份。获取方法见[飞书开放平台文档](https://open.larkoffice.com/document/faq/trouble-shooting/how-to-obtain-union-id)。  
**说明：请求体参数 user_keys、out_ids、emails 至少填一个（最多一次可查询100个）。**  
emails| list<string>| 可选| email 的数组，使用邮箱查询需要确保飞书上已经绑定邮箱。  
**说明：请求体参数 user_keys、out_ids、emails 至少填一个（最多一次可查询100个）。**  
tenant_key| string| 可选| 要查询的用户所在的飞书项目租户 saas_tenant_key，适用于 emails 查询场景：

  * 如果需要查询非插件所属租户的用户时必填，例如租户 X 开发了插件 A，且租户 Y 安装了插件 A，想要查询租户 Y 的用户信息。获取方式详见[获取用户访问凭证 user_access_token](../1p8d7djs/4id4bvnf#3df3fccd)。
  * 如果为空，视为查询的是插件所属租户下的用户信息。

  
  
​

返回参数​

​

参数| 类型| 说明  
---|---|---  
data| list<object>| 查询结果  
err| object| 请求成功时返回空值，请求失败时返回实际错误信息。  
err_msg| string| 请求成功时返回空值，请求失败时返回实际错误信息。  
err_code| int32| 请求成功时返回0，请求失败返回实际错误码。  
  
​

请求示例​

传入单个user_key获取

传入所有参数获取

传入多个user_keys获取

​

JSON

复制

{​

"user_keys": [​

"7012514555133xxxx"​

]​

}

​

​

返回示例​

传入user_key返回

传入所有参数返回

传入多个user_keys返回

错误返回示例

​

JSON

复制

{​

"err": {},​

"err_code": 0,​

"err_msg": "",​

"data": [​

{​

"user_id": 0,​

"name_cn": "用户1",​

"name_en": "user1",​

"out_id": "on_66444f9a15170e1a3609cdda0e6dxxxx", //用户在飞书开放平台的 union_id。​

"name": {​

"default": "用户1", // 默认名称为中文名称​

"en_us": "user1", //中文名称​

"zh_cn": "用户1" //英文名称​

},​

"user_key": "749112601802809xxxx", // 用户的 user_key​

"username": "74911260180280xxxx",// 用户的 user_key​

"email": "user1@example.com",​

"avatar_url": "https://s1-imfile.feishucdn.com/static-resource/v1/xxxx",​

"status": "activated" //状态为正在使用​

}​

]​

}

​

​

错误码​

以下列出了该接口相关的错误码信息，若需查看更多通用错误码说明，参见 [Open API 错误码](../1p8d7djs/5aueo3jr)。​

​

err_code| err_msg| err.code| err.msg| 说明  
---|---|---|---|---  
30006| User Not Found| 30006| User Not Found| 用户查询结果为空，请检查传入的 user_key、out_ids、或者 emails 是否正确且有效。  
20004| Search User Limit| 20004| Search User Limit| 查询用户数超过上限（100条）  
  
​

上一篇

API 列表

下一篇

搜索租户内的用户列表
