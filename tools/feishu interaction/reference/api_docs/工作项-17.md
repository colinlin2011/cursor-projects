按组更新复合字段值

该接口用于针对指定工作项的一个复合字段类型字段，例如删除某一组数据、添加几组数据或者更新某一组数据中的某些子字段。对应的权限申请在权限管理-工作项分类下，相关功能介绍详见 ​权限管理。​

请求说明​

  * 请求方式：POST​



  * 请求地址：/open_api/work_item/field_value/update_compound_field​



请求参数​

Header​

接口调用的 Header 配置详见 [Header](../1p8d7djs/4bsmoql6#a8e43b86)。​

Body​

​

参数| 类型| 是否必须| 说明  
---|---|---|---  
project_key| string| 必须| 空间 ID（project_key），或者空间域名（simple_name）。

  * 空间 ID（project_key），在飞书项目空间双击空间名称获取。
  * 空间域名（simple_name），simple_name 一般在飞书项目空间 URL 中获取。例如空间 URL 为 “https://project.feishu.cn/doc/overview”，则 simple_name为 “doc”。

  
work_item_id| int64| 必须| 工作项实例 ID，在工作项实例详情中，展开右上角 **··· > ID**获取。  
field_key| string| 可选| 待更新的复合字段 ID，与 field_alias不能同时为空，只需填写其中一个即可。  
field_alias| string| 可选| 待更新的复合字段对接标识，与 field_key不能同时为空，只需填写其中一个即可。  
group_uuid| string| 可选| 待处理的复合字段组标识，通过调用[获取工作项详情](../1p8d7djs/r9jxqxnd)接口传入  
need_group_uuid_for_compound 获取。

  * 执行 update 或 delete 操作时必填；
  * 执行 add操作时不可填写。

  
action| string| 必须| 指定对复合字段执行的操作类型。支持的取值如下所示。

  * delete：删除指定的复合字段组；
  * update：更新指定的复合字段组；
  * add：添加新的复合字段组。

  
fields| list<list<Object>>| 可选| 参见[FieldValuePair](../1p8d7djs/1x1d372l#10c42182)，用于指定添加或更新的复合字段数据。

  * 当 action 为 add 时，表示要添加的多组数据；
  * 当 action 为 update 时，表示要更新的单组数据。

  
  
​

返回参数​

​

参数| 类型| 说明  
---|---|---  
err| object| 请求成功时返回空值，请求失败时返回实际错误信息。  
err_msg| string| 请求成功时返回空值，请求失败时返回实际错误信息。  
err_code| int32| 请求成功时0，请求失败返回实际错误码。  
  
​

请求示例​

删除一组数据示例

更新一组数据示例

添加一组数据示例

​

JSON

复制

// 删除一组数据​

{​

"work_item_id": 1181795xx, // 待删除的实例ID​

"project_key": "xxxxxx", // 对应的空间Key​

"field_key": "field_84bxx", // 复合字段ID​

"group_uuid": "InDBOBCF", // 组标识，获取实例详情接口，通过配置expand参数可获取​

"action": "delete" // 删除模式​

}

​

​

返回示例​

成功返回示例

错误返回示例

​

JSON

复制

{​

"err_code": 0,​

"err_msg": "",​

"err": {},​

"data": {}​

}

​

​

错误码​

以下列出了该接口相关的错误码信息，若需查看更多通用错误码说明，参见 [Open API 错误码](../1p8d7djs/5aueo3jr)。​

​

err_code| err_msg| err.code| err.msg| 说明  
---|---|---|---|---  
1000050244| ErrAPIWorkItemNotFound| 1000050| WorkItem Not Found| 更新的工作项实例不存在或已被删除  
1000050156| Invalid Param| 1000050156| ProjectKey not match| project_key 与实例实际所在空间不匹配  
1000050248| Field Not Found| 1000050248| Field Not Found| 待更新的复合字段不存在  
1000050156| Invalid Param| 1000050156| Invalid field, only support compound_field| 待更新的字段非复合字段  
  
​

上一篇

删除工时登记记录

下一篇

创建工作项资源库
