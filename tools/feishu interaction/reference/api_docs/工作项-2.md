获取指定的工作项列表（跨空间）

该接口用于跨多个空间，搜索符合请求参数中传入条件的工作项实例。对应的权限申请在 权限管理-工作项 分类下，相关功能介绍详见​权限管理。​

请求说明​

  * 请求方式：POST​



  * 请求地址：/open_api/work_items/filter_across_project​



请求参数​

Header​

接口调用的 Header 配置详见 [Header](../1p8d7djs/4bsmoql6#a8e43b86)。​

Body​

​

参数| 类型| 是否必须| 说明  
---|---|---|---  
project_keys| list<string>| 可选| 空间 ID 列表，project_key 在飞书项目空间双击空间名称获取。

  * 若填了project_keys，则查询安装了插件的空间工作项信息。
  * 未传project_keys，则查询 header 中用户有权限的空间中安装了插件的空间工作项信息。

  
simple_names| list<string>| 可选| 安装插件的飞书项目空间（simple_name）列表。simple_name 一般在飞书项目空间 URL 中获取。例如空间 URL 为 “https://project.feishu.cn/doc/overview”，则 simple_name为 “doc”。  
work_item_type_key| string| 必须| 工作项类型，可通过[获取空间下工作项类型](../1p8d7djs/3pjp854w)获取  
work_item_name| string| 可选| 工作项名称(支持模糊搜索)。  
search_user| object| 可选| 用户信息列表（支持搜索指定人员为该用户的相关工作项），遵循[SearchUser](../1p8d7djs/1x1d372l#b4eb8859)结构规范  
work_item_ids| list<int64>| 可选| 工作项 ID 列表，在工作项实例中右上角单击 **··· > ID** 获取。  
created_at| object| 可选| 创建时间（支持时间区间查询，可不传截止时间，代表至今）。  
updated_at| object| 可选| 更新时间（支持时间区间查询，可不传截止时间，代表至今）。  
work_item_status| list<object>| 可选| 工作项状态列表，筛选当前处于列表内状态的工作项实例，遵循[WorkItemStatus](../1p8d7djs/1x1d372l#9b44f95f)结构规范。可从以下途径获取：

  * [获取字段信息](../1p8d7djs/3tsposa2)接口中 work_item_status 的 options 中获取，选择对应的 value。
  * [获取创建工作项元数据](../1p8d7djs/2jhqmwhn)接口中的 work_item_status 字段的 options 中获取，选择对应的 value。

  
businesses| list<string>| 可选| 业务线列表，可从[获取空间下业务线详情](../1p8d7djs/55tfjp4z)接口获取  
priorities| list<string>| 可选| 优先级列表，可从[获取字段信息](../1p8d7djs/3tsposa2)中 priority 字段的 options中获取具体的优先级值。  
tags| list<string>| 可选| 用于筛选工作项的标签列表，可在[获取字段信息](../1p8d7djs/3tsposa2)中 tags 字段的 options中获取。  
template_ids| list<int64>| 可选| 模板 ID 列表，用于筛选使用指定模板创建的工作项。可通过以下途径获取模板 ID：

  * [获取创建工作项元数据](../1p8d7djs/2jhqmwhn)接口中的 template 字段的 options 中获取；
  * [获取工作项下的流程模板列表](../1p8d7djs/3pq8jlhd)接口的 template_id；
  * [获取字段信息](../1p8d7djs/3tsposa2)接口中的 template 字段的 options中获取。

  
tenant_group_id| int64| 可选| 渠道id。渠道用户必填  
page_size| int64| 可选| 每页数据，最大50。  
page_num| int64| 可选| 分页页码，从1开始，默认为1。  
expand| object| 可选| 额外参数。  
  
​

返回参数​

​

参数| 类型| 说明  
---|---|---  
data| list<object>| 遵循[WorkItemInfo](../1p8d7djs/1x1d372l#a16fbe28)结构规范  
pagination| object| 分页信息  
err| object| 请求成功时返回空值，请求失败时返回实际错误信息。  
err_msg| string| 请求成功时返回空值，请求失败时返回实际错误信息。  
err_code| int32| 请求成功时返回0，请求失败返回实际错误码。  
  
​

请求示例​

查询指定工作项

带 expand 参数查询

​

JSON

复制

{​

"project_keys": [​

"66f8ea198af41c7300exxxxxx"​

],​

"work_item_type_key": "story",​

"search_user": {​

"field_key": "owner",​

"user_keys": [​

"test_user"​

]​

},​

"created_at": {​

"end": 1753933694380,​

"start": 1753933694372​

},​

"updated_at": {​

"end": 1753933694380,​

"start": 1753933694372​

},​

"work_item_status": [​

{​

"state_key": "started"//处于开始状态的工作项实例​

}​

],​

"work_item_name": "工作项名称",​

"page_num": 1,​

"page_size": 50,​

"tenant_group_id": xxx,​

"work_item_ids": [​

xxx​

],​

"businesses": [​

"xxx"​

],​

"priorities": [​

"xxx"​

],​

"tags": [​

"xxx"​

],​

"simple_names": [​

"xxx"​

],​

"template_ids": [​

xxx​

],​

}

​

​

返回示例​

查询指定工作项

带 expand 参数查询

错误返回示例

​

JSON

复制

{​

"data":[//结构同获取工作项详情，​

{​

"id":1,// 工作项 ID​

"name":"item1",// 工作项名称​

"work_item_type_key":"story",// 工作项类型​

"project_key":"60acd5610444ba031b50xxxx", // 空间 ID​

"simple_name":"test",​

"template_type":"control",//模板名称​

"pattern":"Node", //工作项的模式类型，节点流​

"sub_stage":"started",//工作项状态​

"work_item_status": {},​

"current_nodes":[//当前节点信息（状态模式节点为空），遵循结构规范​

{​

"id":"state_1",​

"name":"node1",​

"owners":[​

"701251455513382xxxx"​

]​

}​

],​

"state_times": [ //节点时间，遵循结构规范。​

{​

"end_time": 1654156400805,​

"name": "开始",​

"start_time": 1654156400804,​

"state_key": "started"​

},​

{​

"end_time": 0,​

"name": "节点表单",​

"start_time": 1654156400805,​

"state_key": "doing"​

}​

],​

"created_by":"700914671966122xxxx",​

"updated_by":"700914671966122xxxx",​

"created_at":1633776613033,​

"updated_at":1633776613033,​

"fields":[ // 字段信息​

{​

"field_alias": "",​

"field_key": "aborted",​

"field_type_key": "aborted",​

"field_value": {​

"is_aborted": false, "reason": ""​

}​

},​

{​

"field_alias": "",​

"field_key": "role_owners",​

"field_type_key": "role_owners",​

"field_value": [​

{​

"owners": [​

"701251455518415xxxx"​

],​

"role": "uiouiouio"​

},​

{​

"owners": null,​

"role": "test"​

},​

{​

"owners": null,​

"role": "tt"​

}​

]​

}​

],​

}​

],​

"err": {},​

"err_msg": "",​

"err_code": 0,​

"pagination": {​

"page_num": 1,​

"page_size": 10,​

"total": 1​

}​

}

​

​

错误码​

以下列出了该接口相关的错误码信息，若需查看更多通用错误码说明，参见 [Open API 错误码](../1p8d7djs/5aueo3jr)。​

​

err_code| err_msg| err.code| err.msg| 说明  
---|---|---|---|---  
20094| Search Result Bigger Than 5000, Please Check Your Search Params| 20094| Search Result Limit| 查询结果超过5000个，请重新设置筛选条件  
20005| Missing Param| 20005| SearchUser.FieldKey Only Support owner、watchers、issue_operator、issue_reporter| 必填的请求参数未填  
20028| Workitem Ids Limit 50| 20028| Workitem Ids Limit 50| 传入的工作项 ID 数量限制50  
50006| OperateFail Please Contact Platform| 50006| elastic: Error 502 (Bad Gateway)| 操作失败，请联系技术支持  
20003| Wrong WorkItemType Param| 20003| work_item_type_key should not empty| 

  * 获取指定的工作项列表：work_item_type_keys 未填
  * 目标工作项为状态流，但是设置了 expand 参数:{ "need_workflow":true}

  
50006| User not found| 50006| user not found| 用户不存在  
50005| Internal Server Error| 50005| Internal Server Error| 网络服务错误  
20013| Invalid Time Interval| 20013| Invalid Time Interval| 时间相关参数，不是毫秒时间戳（13位数字）  
20059| SearchUser.FieldKey Or SearchUser.Role Can't Appear Alone，SearchUser.UserKeys Must Appear| 20059| SearchUser.FieldKey Or SearchUser.Role Can't Appear Alone，SearchUser.UserKeys Must Appear| 搜索时，在 search_user 这个结构中，user_keys 如果为空，Role 或 field_key 不能单独传入  
  
​

上一篇

获取指定的工作项列表（单空间）

下一篇

获取指定的工作项列表（单空间-复杂传参）
