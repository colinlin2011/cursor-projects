更新节点/排期

该接口用于更新一个工作项实例的指定节点信息（仅适用于更新节点流工作项）包括节点负责人、排期和表单信息等。对应的权限申请在 权限管理-工作项 分类下，相关功能介绍详见​权限管理。​

使用说明​

若需更新【按人汇总】类型的排期和节点负责人，则需要在两次调用中分别进行。先更新节点负责人，然后更新排期。​

请求说明​

  * 请求方式：PUT​



  * 请求地址：/open_api/:project_key/workflow/:work_item_type_key/:work_item_id/node/:node_id​



请求参数​

Header​

接口调用的 Header 配置详见 [Header](../1p8d7djs/4bsmoql6#a8e43b86)。​

Path​

​

参数| 类型| 是否必须| 说明  
---|---|---|---  
project_key| string| 必须| 空间 ID（project_key），或者空间域名（simple_name）。

  * 空间 ID（project_key），在飞书项目空间双击空间名称获取。
  * 空间域名（simple_name），simple_name 一般在飞书项目空间 URL 中获取。例如空间 URL 为 “https://project.feishu.cn/doc/overview”，则 simple_name为 “doc”。

  
work_item_type_key| string| 必须| 工作项类型，可以从[获取空间下工作项类型](../1p8d7djs/3pjp854w)接口获取。  
work_item_id| string| 必须| 工作项实例 ID，在工作项实例详情中，展开右上角 **··· > ID** 获取。  
node_id| string| 必须| 目标节点 ID（节点 ID 或节点 state_key等价），可通过[获取工作流详情](../1p8d7djs/5hcmcl04)接口获取。  
  
​

Body​

​

参数| 类型| 是否必须| 说明  
---|---|---|---  
node_owners| list<string>| 可选| 用户 user_key 数组，不传表示无需更新，传入空数组表示删除所有人  
node_schedule| object| 可选| 节点的排期，数值结构参见[Schedule](../1p8d7djs/1x1d372l#8b67e4ee)，非必填，若无需更新则为空，动态计算排期时使用。  
schedules| list<object>| 可选| 子排期数组，非必填，若无需更新则为空，数值结构参见[Schedule](../1p8d7djs/1x1d372l#8b67e4ee)，按人汇总排期时使用。  
若要开启按人汇总排期，节点的负责人必须大于等于两个才会生效。  
fields| list<object>| 可选| 要更新的字段数组，参见[FieldValuePair](../1p8d7djs/1x1d372l#10c42182)。  
role_assignee| list<object>| 可选| 遵循[RoleOwner](../1p8d7djs/1x1d372l#3209a8ce)结构规范。若节点与角色绑定，可通过role_assignee更新对应角色的负责人  
schedule_constraint_rule| object| 可选| 排期联动子项  
  
​

返回参数​

​

参数| 类型| 说明  
---|---|---  
err| object| 请求成功时返回空值，请求失败时返回实际错误信息。  
err_msg| string| 请求成功时返回空值，请求失败时返回实际错误信息。  
err_code| int32| 请求成功时0，请求失败返回实际错误码。  
  
​

请求示例​

更新节点排期/负责人/表单字段

更新动态计算排期

更新按人汇总排期

更新节点绑定的角色人员

请求路径：PUT /open_api/68382b399de4b0ec6c5axxxx/workflow/story/76906788xxxx/node/start​

​

JSON

复制

{​

"node_schedule": {​

"estimate_start_date": 1724169600000,​

"estimate_end_date": 1724428799999,​

"points": 1​

},​

"node_owners": [​

"user_key"​

],​

"fields": [​

{​

"field_alias": "sentry_link",​

"field_key": "field_658c22",​

"field_type_key": "text",​

"field_value": "23333"​

}​

]​

}

​

​

返回示例​

请求成功示例

错误返回示例

​

JSON

复制

{​

"data":{},​

"err": {},​

"err_msg": "",​

"err_code": 0​

}

​

​

错误码​

以下列出了该接口相关的错误码信息，若需查看更多通用错误码说明，参见 [Open API 错误码](../1p8d7djs/5aueo3jr)。​

​

err_code| err_msg| err.code| err.msg| 说明  
---|---|---|---|---  
50006| The node scheduling cannot less than the total scheduling of subtasks| 50006| Node schedule shall not be less than the total schedule of subtasks| 节点排期不得少于子任务的总排期  
1000051743| The estimated score of the node must not be less than the total estimated score of the subtask| 1000051743| Node 估分 must exceed that of its sub-tasks| 节点估分必须超过其子任务的估分  
20090| Your request has been blocked| 20090| Your request has been intercepted.| 操作请求被拦截，请检查是否配置了拦截事件  
10001| Operation Not Permitted| 10001| No Permission| 操作人没有权限  
20005| Missing Param| 20005| Missing Param| 存在必填参数未填写  
30009| Field Not Found| 30009| field_value_pairs field alias schedule_flag:can not find field| 根据传入的 fields 找不到对应字段，请检查参数  
20007| WorkItem Is Already Aborted| 20007| WorkItem Is Already Aborted| 该工作项已被中止  
20041| Field RoleOwner Must Be Set In FieldValuePairs| 20041| Role owner do not exist in DB and request| 未传入角色负责人信息  
30005| WorkItem Not Found| 30005| WorkItem Not Found| path 中的 work_item_id 不正确  
20032| DifferentSchedule Set Owner Invalid| 20032| DifferentSchedule Set Owner Invalid| 差异化排期设置负责人无效，若要开启差异化排期，节点的负责人必须大于等于两个才会生效。  
20083| "Duplication Field Exist| 20083| 20083| 存在重复字段  
30017| Role Owners Not Found| 30017| 从工作项字段role_owners获取数据出错| 传入的角色负责人信息不存在  
  
​

上一篇

获取工作流详情（WBS）

下一篇

节点完成/回滚
