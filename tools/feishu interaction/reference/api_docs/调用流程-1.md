è·å–è®¿é—®å‡­è¯

è¦è°ƒç”¨é£ä¹¦é¡¹ç›®å¼€æ”¾å¹³å° OpenAPI å‰ï¼Œæ’ä»¶éœ€è¦è·å–å¯¹åº”çš„è®¿é—®å‡­è¯ã€‚è®¿é—®å‡­è¯ä»£è¡¨æ’ä»¶ä»å¹³å°/ç”¨æˆ·æ‰‹ä¸­è·å–çš„æˆæƒï¼ŒåŒ…å«æ’ä»¶ä¿¡æ¯å’Œè°ƒç”¨è€…çš„èº«ä»½ä¿¡æ¯ã€‚æœ¬æ–‡å°†ä»‹ç»é£ä¹¦é¡¹ç›®å¼€æ”¾å¹³å°æä¾›çš„è®¿é—®å‡­è¯ä»¥åŠå¦‚ä½•è·å–å’Œä½¿ç”¨ã€‚â€‹

è®¿é—®å‡­è¯ä»‹ç»â€‹

â€‹

è®¿é—®å‡­è¯ç±»å‹ â€‹| è¯´æ˜ â€‹| ç¤ºä¾‹â€‹| è·å–æ–¹æ³•â€‹  
---|---|---|---  
plugin_access_tokenâ€‹| æ’ä»¶è®¿é—®å‡­è¯ã€‚ä¸€èˆ¬ç”¨äºè·å–ç”¨æˆ·è®¿é—®å‡­è¯æˆ–è€…è°ƒç”¨ OpenAPIï¼ˆéœ€è¦ä¸ X-User-Key ä½œä¸ºç”¨æˆ·ä¿¡æ¯æ­é…ä½¿ç”¨ï¼‰ã€‚ â€‹| p-b0dc4a7d-9080-4bc3-b54a-76b68056****â€‹| â€‹è·å–æ’ä»¶è®¿é—®å‡­è¯ plugin_access_tokenâ€‹  
virtual_plugin_tokenâ€‹â€‹| è™šæ‹Ÿæ’ä»¶è®¿é—®å‡­è¯ã€‚æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ’ä»¶è®¿é—®å‡­è¯ï¼Œä»…ä¾›å¼€å‘è°ƒè¯•ä½¿ç”¨ã€‚ä½¿ç”¨æ–¹æ³•ä¸æ’ä»¶è®¿é—®å‡­è¯ç±»ä¼¼ï¼Œä½†æ˜¯è°ƒç”¨çš„ç©ºé—´èŒƒå›´å—æ•°æ®èŒƒå›´å½±å“ã€‚ â€‹| v-b0dc4a7d-9080-4bc3-b54a-76b68056**** â€‹| â€‹è·å–æ’ä»¶è®¿é—®å‡­è¯ plugin_access_tokenâ€‹  
user_access_tokenâ€‹| ç”¨æˆ·è®¿é—®å‡­è¯ï¼Œä»£è¡¨äº†ç”¨æˆ·å¯¹æ’ä»¶çš„ä¸´æ—¶æˆæƒï¼Œä½¿ç”¨è¯¥å‡­è¯ï¼Œæ’ä»¶å°†ä»£è¡¨ç”¨æˆ·æ‰§è¡Œå¯¹åº”çš„æ“ä½œã€‚ â€‹| u-f09b09b8-e78a-405b-9733-7261787e**** â€‹| â€‹è·å–ç”¨æˆ·è®¿é—®å‡­è¯ user_access_tokenâ€‹  
  
â€‹

ä½¿ç”¨è®¿é—®å‡­è¯â€‹

å¼€å‘ä¸€ä¸ªæ’ä»¶åŒ…å«ä»¥ä¸‹åˆ›å»ºæ’ä»¶ã€æ·»åŠ æ„æˆã€å¼€å‘è°ƒè¯•å®¢æˆ·ç«¯ã€å¼€å‘æœåŠ¡ç«¯ã€æµ‹è¯•æ’ä»¶ã€å‘å¸ƒæ’ä»¶ç­‰æ­¥éª¤ã€‚åœ¨å¼€å‘æœåŠ¡ç«¯å’Œè°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ virtual_plugin_tokenï¼›æ’ä»¶å‘å¸ƒåï¼Œå®‰è£…æ’ä»¶å¹¶è¿è¡Œåˆ™ä½¿ç”¨ plugin_access_tokenã€‚â€‹

é£ä¹¦é¡¹ç›®å¼€æ”¾å¹³å°æä¾›äº†ä¸¤ç§ä½¿ç”¨è®¿é—®å‡­è¯è°ƒç”¨ OpenAPI çš„æ–¹å¼ï¼šâ€‹

  * æ–¹å¼ä¸€ï¼šå°† user_access_token æ·»åŠ åˆ° HTTP è¯·æ±‚ä¸­çš„ X-Plugin-Token æ ‡å¤´ä¸­ã€‚â€‹



  * â€‹

Bash

å¤åˆ¶

curl --location 'https://{åŸŸå}/open_api/projects/detail' \â€‹

\--header 'X-Plugin-Token: {{user_token}}' \â€‹

\--header 'Content-Type: application/json' \â€‹

\--data '{ â€‹

"simple_names": [ â€‹

"test_new" â€‹

], â€‹

"user_key": "test" â€‹

}' â€‹

â€‹



  * æ–¹å¼äºŒï¼šå°† plugin_access_token æ·»åŠ åˆ° HTTP è¯·æ±‚ä¸­çš„ X-Plugin-Token æ ‡å¤´ä¸­ï¼Œå¹¶å°†è®¿é—®è€… UserKey æ·»åŠ åˆ° HTTP è¯·æ±‚ä¸­çš„ X-User-Key æ ‡å¤´ä¸­ã€‚â€‹



  * ğŸ“”

è‹¥åœ¨å¼€å‘ã€è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œåˆ™ä½¿ç”¨ virtual_plugin_tokenã€‚â€‹

â€‹



  * â€‹

Bash

å¤åˆ¶

curl --location 'https://{åŸŸå}/open_api/projects/detail' \ â€‹

\--header 'X-Plugin-Token: {{plugin_token}}' \ â€‹

\--header 'X-User-Key: {{user_key}}' \ â€‹

\--header 'Content-Type: application/json' \ â€‹

\--data '{ â€‹

"simple_names": [ â€‹

"test_new" â€‹

], â€‹

"user_key": "test" â€‹

}' â€‹

â€‹



è·å–è®¿é—®å‡­è¯â€‹

è·å–æ’ä»¶è®¿é—®å‡­è¯ plugin_access_tokenâ€‹

ğŸ“”

åœ¨ä½¿ç”¨ plugin_access_token æ—¶ï¼Œè¯·æ³¨æ„ï¼š â€‹

  * plugin_access_token çš„æœ‰æ•ˆæœŸä¸º 7200 ç§’ï¼ˆ2 å°æ—¶ï¼‰ï¼Œæœ‰æ•ˆæœŸå†…é‡å¤è·å–ä¼šè¿”å›ç›¸åŒç»“æœï¼Œè¿‡æœŸåè·å–ä¼šè¿”å›æ–°çš„ plugin_access_tokenã€‚ â€‹



  * å¼€å‘è€…éœ€è¦ç¼“å­˜ plugin_access_tokenï¼Œç”¨äºåç»­æ¥å£çš„è°ƒç”¨ã€‚â€‹



â€‹

è·å– plugin_access_token éœ€è¦é€šè¿‡è·å–æ’ä»¶è®¿é—®å‡­è¯æ¥å£æ¥å®ç°ï¼Œæ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼šâ€‹

1.

ç™»å½•é£ä¹¦é¡¹ç›®å¼€å‘è€…å¹³å°ï¼ŒæŸ¥çœ‹æ’ä»¶è¯¦æƒ…é¡µåŸºæœ¬ä¿¡æ¯é¡µé¢æŸ¥çœ‹æ’ä»¶å‡­è¯ Plugin ID å’Œ Plugin Secretã€‚â€‹




  * â€‹

â€‹â€‹â€‹

â€‹



2.

è°ƒç”¨è·å–æ’ä»¶è®¿é—®å‡­è¯æ¥å£ï¼Œé€šè¿‡æ’ä»¶å‡­è¯ Plugin ID å’Œ Plugin Secret è·å– plugin_access_token ï¼ˆæˆ–è€… virtual_plugin_tokenï¼‰ã€‚â€‹




  * â€‹

è¯·æ±‚æ–¹å¼â€‹| POST â€‹| â€‹| â€‹| â€‹  
---|---|---|---|---  
è¯·æ±‚åœ°å€â€‹| https://{åŸŸå}/open_api/authen/plugin_token â€‹| â€‹| â€‹| â€‹  
è¯·æ±‚å¤´å‚æ•°â€‹| å‚æ•°åâ€‹| ç±»å‹â€‹| å¿…å¡«â€‹| è¯´æ˜â€‹  
â€‹| Content-Type â€‹| string â€‹| æ˜¯ â€‹| å›ºå®šå€¼ï¼šâ€œapplication/jsonâ€ â€‹  
è¯·æ±‚ä½“å‚æ•°â€‹| å‚æ•°åâ€‹| ç±»å‹â€‹| å¿…å¡«â€‹| è¯´æ˜â€‹  
â€‹| plugin_id â€‹| string â€‹| æ˜¯ â€‹| æ’ä»¶å”¯ä¸€æ ‡è¯†ï¼ŒPlugin ID â€‹  
â€‹| plugin_secret â€‹| string â€‹| æ˜¯ â€‹| æ’ä»¶å¯†é’¥ï¼ŒPlugin Secret â€‹  
â€‹| type â€‹| int â€‹| å¦ â€‹| æ’ä»¶è®¿é—®å‡­è¯ç±»å‹ï¼Œå¯é€‰å€¼ï¼š0ã€1ã€‚é»˜è®¤ä¸º plugin_access_tokenï¼Œå€¼ä¸º 1 æ—¶å°†è¿”å› virtual_plugin_tokenã€‚â€‹  
cURL ç¤ºä¾‹â€‹ â€‹| â€‹Bashå¤åˆ¶curl --location 'https://{åŸŸå}/open_api/authen/plugin_token' \â€‹\--header 'Content-Type: application/json' \â€‹\--data '{ â€‹ "plugin_id": "MII_63E9D49B8C82****", â€‹ "plugin_secret": "D01B5F1A191C8620D133CDC371C0****", â€‹ "type": 0 â€‹}' â€‹â€‹| â€‹| â€‹| â€‹  
å“åº”ä½“å‚æ•°â€‹| â€‹JSONå¤åˆ¶{ â€‹ "data": { â€‹ "expire_time": 7200, // tokenå¤±æ•ˆæ—¶é—´ â€‹ "token": "p-49257489-f7d7-4cd6-b34f-98c6b81d****" // æ’ä»¶è®¿é—®å‡­è¯ plugin_access_token â€‹ }, â€‹ "error": { â€‹ "code": 0, // è¿”å›ç ï¼Œé0è¡¨ç¤ºå¤±è´¥ â€‹ "msg": "success" // è¿”å›ç æè¿° â€‹ } â€‹} â€‹â€‹| â€‹| â€‹| â€‹  
  
â€‹



è·å–ç”¨æˆ·è®¿é—®å‡­è¯ user_access_tokenâ€‹

åœ¨è·å–ç”¨æˆ·è®¿é—®å‡­è¯ä½¿ç”¨çš„æ˜¯ä»¥ä¸‹çš„ Oauth ç®€è¦æˆæƒæµç¨‹ï¼šâ€‹

â€‹

â€‹â€‹â€‹

â€‹

ğŸ“”

ä½¿ç”¨ user_access_token çš„å‰ææ˜¯æ’ä»¶æœ‰â€‹æ·»åŠ æ’ä»¶æ„æˆï¼Œå› ä¸ºéœ€è¦è¯†åˆ«åˆ°å½“å‰æ“ä½œçš„ç”¨æˆ·èº«ä»½ã€‚å¦‚ä½•å¼€å‘å‰ç«¯æ„æˆè¯¦è§â€‹å¼€å‘å¹¶å‘å¸ƒç¬¬ä¸€ä¸ªæ’ä»¶ã€‚â€‹

â€‹

å…·ä½“è·å–æ­¥éª¤å¦‚ä¸‹ï¼šâ€‹

1.

è·å–æˆæƒç  codeã€‚æˆæƒç  code å¯å¤šæ¬¡è·å–ï¼Œå•æˆæƒç /code çš„æœ‰æ•ˆæœŸä¸º 5 åˆ†é’Ÿå¹¶ä»…å¯ä½¿ç”¨ä¸€æ¬¡ã€‚â€‹




æ’ä»¶ 2.0 ï¼ˆæ¨èï¼‰

æ’ä»¶ 1.0ï¼ˆæš‚åœç»´æŠ¤ï¼‰

ä½¿ç”¨å®¢æˆ·ç«¯ API getAuthCode è·å–æˆæƒç ï¼Œè¯¦è§â€‹getAuthCode(): Promise< >ã€‚â€‹

â€‹

JavaScript

å¤åˆ¶

const { code } = await window.JSSDK.utils.getAuthCode(); â€‹

console.log('code', code); // "27s72sn7s" â€‹

â€‹

â€‹

2.

é€šè¿‡æˆæƒç  code å’Œ plugin_access_token è·å– user_access_tokenã€‚â€‹




  * è·å– plugin_access_token è¯¦è§â€‹è·å–æ’ä»¶è®¿é—®å‡­è¯ plugin_access_tokenã€‚â€‹



  * å½“æ‚¨è·å–åˆ° code å’Œ plugin_access_token åï¼Œå°±å¯ä»¥é€šè¿‡ OpenAPI /open_api/authen/user_plugin_token æ¥å£è·å– user_access_tokenã€‚â€‹



  * ğŸ“”

ä¸èƒ½ç›´æ¥åœ¨å‰ç«¯æ’ä»¶ç›´æ¥è°ƒç”¨ OpenAPIï¼Œéœ€è¦åœ¨ä½ è‡ªå·±çš„æœåŠ¡ç«¯å‘èµ·è¯·æ±‚ï¼Œå‰ç«¯æ’ä»¶å¯ä»¥é€šè¿‡è®¿é—®æ‚¨çš„æœåŠ¡è·å– user_access_tokenã€‚â€‹

â€‹



  * â€‹

è¯·æ±‚æ–¹å¼â€‹| POST â€‹| â€‹| â€‹| â€‹  
---|---|---|---|---  
è¯·æ±‚åœ°å€â€‹| https://{åŸŸå}/open_api/authen/user_plugin_token â€‹| â€‹| â€‹| â€‹  
è¯·æ±‚å¤´å‚æ•°â€‹| å‚æ•°åâ€‹| ç±»å‹â€‹| å¿…å¡«â€‹| è¯´æ˜â€‹  
â€‹| Content-Type â€‹| string â€‹| æ˜¯ â€‹| å›ºå®šå€¼ï¼šâ€œapplication/jsonâ€ â€‹  
â€‹| X-Plugin-Token â€‹| string â€‹| æ˜¯ â€‹| æ’ä»¶è®¿é—®å‡­è¯ï¼ˆplugin_access_tokenï¼‰ï¼Œç¤ºä¾‹ï¼šâ€œp-24af8f8f-290f-4fc7-86e1-b592e46d****â€ â€‹  
è¯·æ±‚ä½“å‚æ•°â€‹| å‚æ•°åâ€‹| ç±»å‹â€‹| å¿…å¡«â€‹| è¯´æ˜â€‹  
â€‹| code â€‹| string â€‹| æ˜¯ â€‹| æˆæƒç ï¼Œç¤ºä¾‹ï¼šâ€œc8e2bf5ff54a41509cf97f94c763****â€ â€‹  
â€‹| grant_type â€‹| string â€‹| æ˜¯ â€‹| æˆæƒæ–¹å¼ï¼Œå¿…é¡»å¡«å†™ï¼šâ€œauthorization_codeâ€ â€‹  
cURL ç¤ºä¾‹â€‹ â€‹| â€‹Bashå¤åˆ¶curl --location 'https://{åŸŸå}/open_api/authen/user_plugin_token' \â€‹\--header 'X-Plugin-Token: p-694b3fcd-5eec-4380-a4e4-9c09699a****' \â€‹\--header 'Content-Type: application/json' \â€‹\--data '{â€‹ "code": "7849d137b6d947a5bdee470eedd6****",â€‹ "grant_type": "authorization_code"â€‹}'â€‹â€‹| â€‹| â€‹| â€‹  
å“åº”ä½“å‚æ•°â€‹| â€‹JSONå¤åˆ¶{â€‹ "data": {â€‹ "token": "u-efe05d32-b733-4b15-a960-6acadf8e****",// ç”¨æˆ·è®¿é—®å‡­è¯ user_access_tokenâ€‹ "expire_time": 7200, // user_access_token æœ‰æ•ˆæ—¶é—´â€‹ "refresh_token": "85cde42e-76c8-4677-a783-1e5761f7****", // åˆ·æ–°ç”¨æˆ· user_access_token æ—¶ä½¿ç”¨çš„ refresh_tokenâ€‹ "refresh_token_expire_time": 1209600, // refresh_token æœ‰æ•ˆæ—¶é—´â€‹ "saas_tenant_key": "DeepCollaboration", // ç”¨æˆ·æ‰€å±ç§Ÿæˆ·â€‹ "user_key": "he" // ç”¨æˆ·å”¯ä¸€æ ‡è¯†â€‹ },â€‹ "error": {â€‹ "code": 0, // è¿”å›ç ï¼Œé0è¡¨ç¤ºå¤±è´¥â€‹ "msg": "success" // è¿”å›ç æè¿°â€‹ }â€‹}â€‹â€‹| â€‹| â€‹| â€‹  
  
â€‹



3.

ï¼ˆå¯é€‰ï¼‰è°ƒç”¨åˆ·æ–°ç”¨æˆ·è®¿é—®å‡­è¯æ¥å£ï¼Œæ›´æ–°ç”¨æˆ·è®¿é—®å‡­è¯çš„æœ‰æ•ˆæ—¶é—´ã€‚â€‹




  * â€‹

è¯·æ±‚æ–¹å¼â€‹| POST â€‹| â€‹| â€‹| â€‹  
---|---|---|---|---  
è¯·æ±‚åœ°å€â€‹| https://{åŸŸå}/open_api/authen/refresh_token â€‹| â€‹| â€‹| â€‹  
è¯·æ±‚å¤´å‚æ•°â€‹| å‚æ•°åâ€‹| ç±»å‹â€‹| å¿…å¡«â€‹| è¯´æ˜â€‹  
â€‹| Content-Type â€‹| string â€‹| æ˜¯ â€‹| å›ºå®šå€¼ï¼šâ€œapplication/jsonâ€ â€‹  
â€‹| X-Plugin-Token â€‹| string â€‹| æ˜¯ â€‹| è®¿é—®å‡­è¯ï¼ˆplugin_access_tokenï¼‰ï¼Œç¤ºä¾‹ï¼šâ€œu-24af8f8f-290f-4fc7-86e1-b592e46d****â€ â€‹  
è¯·æ±‚ä½“å‚æ•°â€‹| å‚æ•°åâ€‹| ç±»å‹â€‹| å¿…å¡«â€‹| è¯´æ˜â€‹  
â€‹| refresh_token â€‹| string â€‹| æ˜¯ â€‹| åˆ·æ–°ç”¨æˆ· user_access_token çš„ refresh_tokenï¼Œç¤ºä¾‹ï¼šâ€œ8311cee4-1d47-4351-9553-300ae4a****â€ â€‹  
â€‹| type â€‹| string â€‹| æ˜¯ â€‹| è¦åˆ·æ–°çš„ token ç±»å‹ï¼Œå¿…é¡»å¡«å†™ï¼šâ€œ1â€ â€‹  
cURL ç¤ºä¾‹â€‹ â€‹| â€‹Bashå¤åˆ¶curl --location 'https://{åŸŸå}/open_api/authen/refresh_token' \â€‹\--header 'X-Plugin-Token: u-24af8f8f-290f-4fc7-86e1-b592e46d****' \â€‹\--header 'Content-Type: application/json' \â€‹\--data '{â€‹ "refresh_token": "8311cee4-1d47-4351-9553-300ae4af****",â€‹ "type": 1â€‹}'â€‹â€‹| â€‹| â€‹| â€‹  
å“åº”ä½“å‚æ•°â€‹| â€‹JSONå¤åˆ¶{â€‹ "data": {â€‹ "expire_time": 7200, // user_access_token æœ‰æ•ˆæ—¶é—´â€‹ "token": "u-d098fd08-61fc-4d6e-8864-f653785c****",// ç”¨æˆ·è®¿é—®å‡­è¯ user_access_tokenâ€‹ "refresh_token": "8311cee4-1d47-4351-9553-300ae4af****", // åˆ·æ–°ç”¨æˆ· user_access_token æ—¶ä½¿ç”¨çš„ refresh_tokenâ€‹ "refresh_token_expire_time": 1209600, // refresh_token æœ‰æ•ˆæ—¶é—´â€‹ },â€‹ "error": {â€‹ "code": 0, // è¿”å›ç ï¼Œé0è¡¨ç¤ºå¤±è´¥â€‹ "msg": "success" // è¿”å›ç æè¿°â€‹ }â€‹}â€‹â€‹| â€‹| â€‹| â€‹  
  
â€‹



å®¢æˆ·ç«¯éªŒè¯ç”¨æˆ·æˆæƒå’Œç™»å½•æ€â€‹

å®Œæˆ user_access_token è·å–åï¼Œè¿˜éœ€è¦åœ¨å®¢æˆ·ç«¯è¿›è¡ŒéªŒè¯ã€‚â€‹

æ’ä»¶ 2.0ï¼ˆæ¨èï¼‰

æ’ä»¶1.0ï¼ˆæš‚åœç»´æŠ¤ï¼‰

â€‹

JavaScript

å¤åˆ¶

async function isLogin() { â€‹

const tokenStr = await window.JSSDK.storage.getItem('user_access_token'); â€‹

try { â€‹

// âš ï¸ æ³¨æ„ï¼šæ‚¨å¯ä»¥æŒ‰è‡ªå·±çš„è§„åˆ™æ ¡éªŒå½“å‰ç™»å½•æ€çš„æœ‰æ•ˆæ€§ï¼Œæ­¤å¤„ä»…ä½œç¤ºä¾‹ â€‹

const { token, expire_time } = JSON.parse(tokenStr); â€‹

if (!token || expire_time <= Date.now()) { â€‹

return false; â€‹

} â€‹

return true; â€‹

} catch (e) { â€‹

return false; â€‹

} â€‹

} â€‹

â€‹

// æ‚¨å¯ä»¥åœ¨éœ€è¦æˆæƒçš„ä½ç½®è°ƒç”¨è¯¥æ–¹æ³•è¿›è¡Œæˆæƒ â€‹

export async function authorize() { â€‹

const logined = await isLogin(); â€‹

if (logined) { â€‹

return true; â€‹

} â€‹

// Step1. è·å–æˆæƒç  â€‹

const { code } = await window.JSSDK.utils.getAuthCode(); â€‹

â€‹

â€‹

// âš ï¸ æ³¨æ„ï¼šç”±äº token éœ€è¦é€šè¿‡æœåŠ¡ç«¯è°ƒç”¨ OpenAPI ç”Ÿæˆï¼Œæ‰€ä»¥ä»¥ä¸‹ç¤ºä¾‹æ‚¨éœ€ç»“åˆå…·ä½“å®ç°è¿›è¡Œè°ƒæ•´ â€‹

try { â€‹

// Step2. è¯·æ±‚æ‚¨çš„æ’ä»¶æœåŠ¡ï¼Œé€šè¿‡ code è·å– user_access_token â€‹

const response = await fetch('https://your-plugin-sever.com/login/withlarkproject', { â€‹

method: 'POST', â€‹

headers: { â€‹

'Content-Type': 'application/json', â€‹

}, â€‹

body: JSON.stringify({ â€‹

code, â€‹

}), â€‹

}); â€‹

if (!response.ok) { â€‹

return false; â€‹

} â€‹

const { token, expire_time } = await response.json(); // å»ºè®®æ’ä»¶æœåŠ¡ç«¯è®¡ç®—å…·ä½“è¿‡æœŸæ—¶é—´æˆ³ expire_time è¿”å› â€‹

// Step3. å¯ä»¥å°† token å’Œè¿‡æœŸæ—¶é—´å†™å…¥æµè§ˆå™¨ç¼“å­˜ï¼Œé¿å…çŸ­æ—¶é—´é‡å¤è·å– â€‹

try { â€‹

await window.JSSDK.storage.setItem( â€‹

'user_access_token', â€‹

JSON.stringify({ â€‹

token, â€‹

expire_time, â€‹

}), â€‹

); â€‹

} catch (e) { â€‹

// å¦‚æœ¬åœ°ç¼“å­˜å†™å…¥å¼‚å¸¸ä¹Ÿä¸åº”å½±å“æœ¬æ¬¡æˆæƒæˆåŠŸ â€‹

} â€‹

return true; â€‹

} catch (e) { â€‹

// æˆæƒç™»å½•å¤±è´¥ â€‹

return false; â€‹

} â€‹

} â€‹

â€‹

â€‹

èµ„æºè®¿é—®æƒé™â€‹

å†³å®š OpenAPI æ˜¯å¦å…è®¸è¢«è°ƒç”¨æˆ–è€…ç›¸å…³æ•°æ®æ˜¯å¦è¢«è¿”å›å—è‹¥å¹²ä¸ªå› ç´ å½±å“ï¼š â€‹

1.

æ’ä»¶æ˜¯å¦ç”³è¯·å¯¹åº”æƒé™ï¼› â€‹




2.

å¯¹åº”ç©ºé—´æ˜¯å¦å®‰è£…æ‹¥æœ‰å¯¹åº”æƒé™çš„æ’ä»¶ç‰ˆæœ¬ï¼› â€‹




3.

ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰å¯¹åº”ç©ºé—´æˆ–æ•°æ®çš„è®¿é—®æƒé™æˆ–ç¼–è¾‘æƒé™ã€‚â€‹




è‹¥æ‚¨ä½¿ç”¨ virtual_plugin_tokenï¼Œå°†ä¸å—ç¬¬ 2 ç‚¹é™åˆ¶ã€‚ä½†æ˜¯ Open API ä»…æ”¯æŒè·å–è¢«è®¾ç½®ä¸ºæ•°æ®èŒƒå›´çš„ç©ºé—´å†…çš„æ•°æ®ã€‚æ•°æ®èŒƒå›´åœ¨æ’ä»¶æƒé™ç®¡ç†ä¸­è®¾ç½®ã€‚â€‹

â€‹

â€‹â€‹â€‹

â€‹

â€‹

ä¸Šä¸€ç¯‡

Open API æ¦‚è¿°

ä¸‹ä¸€ç¯‡

æœåŠ¡ç«¯ SDK
