获取工作流详情

该接口用于获取指定空间和工作项类型下的一个工作项实例的工作流信息，包括节点的状态、负责人、估分以及表单、子任务等。对应的平台功能介绍，如节点流类型以需求实例举例，可参考​流程图，如状态流类型以缺陷举例，可参考​新建缺陷。对应的权限申请在权限管理-工作项分类下，相关功能介绍详见 ​权限管理。​

​

​​​

​

​

请求说明​

  * 请求方式：POST​



  * 请求地址：/open_api/:project_key/work_item/:work_item_type_key/:work_item_id/workflow/query​



请求参数​

Header​

接口调用的 Header 配置详见 [Header](../1p8d7djs/4bsmoql6#a8e43b86)。​

Path​

​

参数| 类型| 是否必须| 说明  
---|---|---|---  
project_key| string| 必须| 空间 ID（project_key），或者空间域名（simple_name）。

  * 空间 ID（project_key），在飞书项目空间双击空间名称获取。
  * 空间域名（simple_name），simple_name 一般在飞书项目空间 URL 中获取。例如空间 URL 为 “https://project.feishu.cn/doc/overview”，则 simple_name为 “doc”。

  
work_item_type_key| string| 必须| 工作项类型，创建工作项时自动生成，通过[获取空间下工作项类型](../1p8d7djs/3pjp854w)接口获取，需要与 work_item_id 对应实例匹配。  
work_item_id| string| 必须| 工作项实例 ID，在工作项实例详情中，展开右上角 **··· > ID** 获取。  
  
​

Body​

​

参数| 类型| 是否必须| 说明  
---|---|---|---  
fields| list<string>| 可选| 定义返回信息中节点表单的字段内容，默认返回全部字段。支持两种模式，两种模式不可混用。

  * 指定字段模式：仅返回节点表单 fields 中列出的字段。如 ["name", "created_at"]，表示只返回 name 和 created_at 字段及相关信息。
  * 排除字段模式：以 - 开头的字段表示排除该字段。如 ["-name", "-created_at"]，表示返回除 name 和 created_at 外的所有字段及相关信息。

  
flow_type| int64| 可选| 工作流类型，默认值为 0。支持的取值如下所示。

  * 0：节点流（如需求等）；
  * 1：状态流，状态流工作项必传（如缺陷、版本等）。

  
expand| object| 可选| 额外参数，该返回结构遵循结构体[ExPand](../1p8d7djs/1x1d372l#5e0e767b)格式与规范，仅支持 need_user_detail 参数。  
  
​

nfinished_infos​

返回参数​

​

参数| 类型| 说明  
---|---|---  
data| object| 实例工作流信息，该返回结构遵循结构体[NodesConnections](../1p8d7djs/1x1d372l#ca3a470a)格式与规范。  
err| object| 请求成功时返回空值，请求失败时返回实际错误信息。  
err_msg| string| 请求成功时返回空值，请求失败时返回实际错误信息。  
err_code| int32| 请求成功时0，请求失败返回实际错误码。  
  
​

请求示例​

查询节点流

查询状态流

定制返回字段

排除返回字段

以下为查询状态流工作项所有信息的请求示例，包含扩展参数。​

请求 Path：POST /open_api/676e6839bd3a3bcba14xxxx/work_item/story/126941xxx/workflow/query​

​

JSON

复制

{​

"flow_type": 0,​

"expand": {​

"need_user_detail": true​

}​

}

​

​

返回示例​

查询节点流

查询状态流

定制返回字段

排除返回字段

错误返回示例

节点流工作项返回信息中，包含 workflow_nodes、connections 两个结构体。由于入参中输入了额外参数 need_user_detail，因此返回参数中包含 user_details 信息。​

​

JSON

复制

{​

"err": {},​

"err_code": 0,​

"err_msg": "",​

"data": {​

"workflow_nodes": [ //工作流中各个节点的详细信息​

{​

"id": "start",​

"name": "开始",​

"schedules": [​

{​

"estimate_end_date": 1761148799999, //预计开始时间（毫秒时间戳，精确到天，开始时间为00:00:00）​

"owners": [ ​

"749112601802809xxxx"​

],​

"points": 2, //估分​

"estimate_start_date": 1760976000000 //预计结束时间（毫秒时间戳，精确到天，结束时间为23:59:59）​

}​

],​

"checker": [​

{​

"checked_time": 0,​

"owner": "7294407101554720788",​

"status": 1​

},​

{​

"checked_time": 0,​

"owner": "7169520000523370516",​

"status": 0​

}​

],​

"node_fields": [​

{ // 数字类​

"field_alias": "",​

"field_key": "nfield_8abbec",​

"field_value": 1,​

"field_type_key": "number"​

},​

{ // 选择类​

"field_key": "nfield_123456",​

"field_value": {​

"value": "fdgbjo34r",​

"label": "选择一"​

},​

"field_type_key": "select",​

"field_alias": ""​

},​

{ // 节点多人复合字段​

"field_key": "nfield_123456",​

"field_value": [​

{​

"target_field_owner": "7542934863176113",​

"sub_field_values": [ // 各填写人员名下的子字段填写内容​

{​

"field_key": "nfield_321321", // 子字段key​

"field_value": "不同字段类型有对应结构体",​

"field_type_key": "..."​

},​

{​

"field_key": "nfield_321322", // 子字段key​

"field_value": "不同字段类型有对应结构体",​

"field_type_key": "..."​

}​

]​

}​

],​

"field_type_key": "...",​

"field_alias": ""​

}​

],​

"finished_infos": {​

"summary_mode": "calculation", // 汇总模式，calculation汇总计算，independence独立填写​

"opinion": {​

"finished_opinion_result": "意见", // 汇总意见，无效时不展示​

"owners_finished_opinion_result": [ // 人员意见，无效时不展示​

{​

"node_owner": "7325343738828423187", // 用户user_key​

"finished_opinion_result": "意见" // 意见​

}​

]​

},​

"conclusion": {​

"finished_conclusion_result": { // 汇总结论，无效时不展示​

"key": "7542934863176113",​

"label": "未通过",​

"origin_label": "未通过"​

},​

"owners_finished_conclusion_result": [ // 人员结论，无效时不展示​

{​

"node_owner": "7325343738828423187", // 用户user_key​

"finished_conclusion_result": { // 结论​

"key": "7542934863176113",​

"label": "未通过",​

"origin_label": "未通过"​

}​

}​

]​

}​

},​

"sub_tasks": [ //节点子任务​

{​

"actual_finish_time": "2025-10-22T03:43:42.597Z",​

"assignee": [​

"7491126018028093443"​

],​

"owner_usage_mode": 0, // 子任务负责人分配模式，1=自行添加(不限范围/限制范围)，2=与角色联动​

"order": 1761104612376, //子任务顺序​

"details": "",​

"passed": true, ​

"owners": [​

"749112601802809xxxx"​

],​

"id": "643270xxxx", //子任务id​

"schedules": [ //不同用户的排期数组（仅在差异化排期时有值）​

{​

"owners": [​

"749112601802809xxxx"​

],​

"points": 2, //估分​

"estimate_start_date": 1760976000000, // 预计开始时间（毫秒时间戳，精确到天，开始时间为00:00:00）​

"estimate_end_date": 1761148799999 // 预计结束时间（毫秒时间戳，精确到天，结束时间为23:59:59）​

}​

],​

"actual_begin_time": "2025-10-22T03:43:32.886Z",​

"owner_roles": ["DA"], // 子任务负责人范围或者关联的角色，当mode=1且该值为空，意味着负责人分配方式是自动添加。​

"name": "测试1",​

"note": "",​

"role_assignee": [​

{​

"role": "DA",​

"owners": [​

"735679528040829xxxx"​

], // 人员未填时会返回​

}​

],​

"actual_finish_time": "2025-10-22T03:43:47.738Z",​

"different_schedule": false,​

"milestone": false,​

"fields": [​

{​

"field_key": "priority",​

"field_value": {​

"label": "P1",​

"value": "1"​

},​

"field_type_key": "select",​

"field_alias": "priority"​

},​

{​

"field_key": "description",​

"field_value": "",​

"field_type_key": "multi_text",​

"field_alias": "description"​

}​

],​

"owners": [​

"749112601802809xxxx"​

],​

"state_key": "start",​

"status": 3,​

"node_schedule": {​

"points": 2,​

"estimate_start_date": 1760976000000,​

"estimate_end_date": 1761148799999,​

"owners": [​

"749112601802809xxxx"​

]​

},​

"actual_begin_time": "2025-08-15T06:56:13.258Z",​

"owner_usage_mode": 1​

},​

{​

"id": "doing",​

"schedules": [​

{​

"estimate_end_date": 0,​

"owners": [​

"749112601802809xxxx"​

],​

"points": 0,​

"estimate_start_date": 0​

}​

],​

"actual_finish_time": "2025-10-22T03:44:28.489Z",​

"name": "进行中",​

"different_schedule": true,​

"state_key": "doing",​

"status": 3,​

"milestone": false,​

"owner_usage_mode": 1,​

"owners": [​

"749112601802809xxxx"​

],​

"node_schedule": {​

"points": 0,​

"owners": [​

"749112601802809xxxx"​

]​

},​

"sub_tasks": [],​

"actual_begin_time": "2025-10-22T03:43:47.746Z"​

},​

{​

"id": "end",​

"actual_begin_time": "2025-10-22T03:44:28.492Z",​

"node_schedule": {​

"points": 0​

},​

"sub_tasks": [],​

"different_schedule": false,​

"status": 2,​

"actual_finish_time": "",​

"milestone": false,​

"state_key": "end",​

"name": "结束",​

"owner_usage_mode": 1​

}​

],​

"connections": [ //状态上下游信息​

{​

"source_state_key": "start", //源状态key​

"target_state_key": "doing" //目标状态key​

},​

{​

"source_state_key": "doing",​

"target_state_key": "end"​

}​

],​

"user_details": [​

{​

"email": "user1@example.com",​

"name_cn": "用户1",​

"name_en": "user1",​

"user_key": "749112601802809xxxx",​

"username": "749112601802809xxxx"​

}​

],​

"template_id": 3047075,​

"version": 6​

}​

}

​

​

错误码​

以下列出了该接口相关的错误码信息，若需查看更多通用错误码说明，参见 [Open API 错误码](../1p8d7djs/5aueo3jr)。​

​

err_code| err_msg| err.code| err.msg| 说明  
---|---|---|---|---  
30005| WorkItem Not Found| 30005| WorkItem Not Found| 检查给定的实例 ID 是否存在对应实例。  
20026| FlowType Is Error| 20026| FlowType Is Error| 检查请求体中的 flow_type 是否正确。  
20027| FlowType Is Error| 20027| FlowType Is Error| 检查请求体中的 flow_type 是否正确。  
10001| Operation Not Permitted| 10001| Operation Not Permitted| 检查当前登录人对当前实例的权限。  
20014| Project And WorkItem Not Match| 20014| Project And WorkItem Not Match| 检查入参中的 project_key 与 work_item_id 对应实例是否匹配。  
50006| fail to read/write db| 50006| fail to read/write db| 数据库读写失败，可重试请求，多次重试失败后可发起 ONCALL 咨询。  
20015| Field Mix With '-' And Without '-'| 20015| Field Mix With '-' And Without '-'| fields 字段中混用了指定字段和排除字段模式，请选择一种使用。  
  
​

上一篇

通过资源创建实例

下一篇

获取工作流详情（WBS）
