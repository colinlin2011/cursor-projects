获取指定的工作项列表（全局搜索）

该接口用于按照标题、描述、人员等多字段和工作项类型，跨空间搜索符合条件的工作项实例列表，对应的平台功能可参考​全局搜索。对应的权限申请在权限管理-工作项实例分类下，相关功能介绍详见​权限管理。​

请求说明​

  * 请求方式：POST​



  * 请求地址：/open_api/compositive_search​



请求参数​

Header​

接口调用的 Header 配置详见 [Header](../1p8d7djs/4bsmoql6#a8e43b86)。​

Body​

​

参数| 类型| 是否必须| 说明  
---|---|---|---  
project_keys| list<string>| 可选| 指定搜索的空间范围，为空间 key 的列表  
query_type| string| 必须| 查询类型，可选值为工作项和视图：

  * workitem：工作项
  * view：视图

  
query_sub_type| list<string>| 可选| 指定工作项类型列表，用于筛选查询结果。当 query_type 为 workitem时生效  
query| string| 必须| 查询内容  
page_size| int64| 可选| 分页大小 ，默认50  
page_num| int64| 可选| 页码，默认1  
  
​

返回参数​

​

参数| 类型| 说明  
---|---|---  
data| list<object>| 最多只能查询到匹配度最高的前200条数据，遵循[CompInfo](../1p8d7djs/1x1d372l#43836e24)结构规范  
pagination| object| 分页信息对象，包含分页查询结果的总记录数、当前页码和每页数据条目数量。  
err| object| 请求成功时返回空值，请求失败时返回实际错误信息。  
err_msg| string| 请求成功时返回空值，请求失败时返回实际错误信息。  
err_code| int32| 请求成功时返回空值，请求失败时返回实际错误信息。  
  
​

请求示例​

搜索工作项

搜索视图

​

JSON

复制

{​

"query_type":"workitem",​

"query_sub_type":["story"],​

"query":"测试需求",​

"page_size": 10,​

"page_num": 1​

}

​

​

返回示例​

搜索工作项

搜索视图

错误返回示例

​

JSON

复制

{​

"pagination": {​

"page_num": 1,​

"page_size": 10,​

"total": 1​

},​

"data": [​

{​

"CreatedAt": 1656584323000,//创建时间戳​

"CreatedBy": "xxx",//创建人​

"ID": "5575627",//工作项/视图id​

"ProjectKey": "xxx",//空间key​

"SearchHit": [//命中结果字段的key​

"created_by",//代表创建者命中查询内容​

"name"//代表工作项名称命中查询内容​

],​

"WorkItemTypeKey": "story",//工作项类型​

"name": "待测试的需求"//工作项/视图名称​

},​

]​

"err": {},​

"err_code": 0,​

"err_msg": ""​

}

​

​

错误码​

以下列出了该接口相关的错误码信息，若需查看更多通用错误码说明，参见 [Open API 错误码](../1p8d7djs/5aueo3jr)。​

​

err_code| err_msg| err.code| err.msg| 说明  
---|---|---|---|---  
20080| Query length must be larger than 0| 20080| Query length must be larger than 0| 关键词为空或超过 200  
20081| Query type is not supported| 20081| Query type is not supported| query_type 填写错误  
  
​

上一篇

获取指定的工作项列表（单空间-复杂传参）

下一篇

获取指定的关联工作项列表（单空间）
