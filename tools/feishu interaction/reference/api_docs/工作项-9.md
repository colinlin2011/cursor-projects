更新工作项

该接口用于修改指定空间和工作项类型下的一个“工作项实例”，可修改字段可以从​获取创建工作项元数据 接口中获取，对应的权限申请在 权限管理-工作项 分类下，相关功能介绍详见 ​权限管理。​

请求说明​

  * 请求方式：PUT​



  * 请求地址：/open_api/:project_key/work_item/:work_item_type_key/:work_item_id​



请求参数​

Header​

接口调用的 Header 配置详见 [Header](../1p8d7djs/4bsmoql6#a8e43b86)。​

Path​

​

参数| 类型| 是否必须| 说明  
---|---|---|---  
project_key| string| 必须| 空间 ID（project_key），或者空间域名（simple_name）。

  * 空间 ID（project_key），在飞书项目空间双击空间名称获取。
  * 空间域名（simple_name），simple_name 一般在飞书项目空间 URL 中获取。例如空间 URL 为 “https://project.feishu.cn/doc/overview”，则 simple_name为 “doc”。

  
work_item_type_key| string| 必须| 工作项类型，系统自动生成，可以从[获取空间下工作项类型](../1p8d7djs/3pjp854w)接口获取。  
work_item_id| string| 必须| 工作项实例 ID，在工作项实例详情右上角展开 **···** ，单击 ID 信息即可获取。  
  
​

Body​

​

参数| 类型| 是否必须| 说明  
---|---|---|---  
update_fields| list<object>| 必须| 目标更新的字段列表，遵循[FieldValuePair](../1p8d7djs/1x1d372l#10c42182)结构规范。对指定的字段更新，更新后的值会覆盖之前的值。不支持模版、投票字段修改。  
  
​

返回参数​

​

参数| 类型| 说明  
---|---|---  
err| object| 请求成功时返回空值，请求失败时返回实际错误信息。  
err_msg| string| 请求成功时返回空值，请求失败时返回实际错误信息。  
err_code| int32| 请求成功时0，请求失败返回实际错误码。  
  
​

请求示例​

请求路径：PUT /open_api/68382b399de4b0ec6c5xxxx/work_item/story/123456xxxx​

​

JSON

复制

{​

"update_fields":[​

{​

"field_key":"field_184c63",//字段key，作为请求参数和field_alias二选一必填​

"field_value":1646409600000//字段值，作为请求参数必填​

},​

{​

"field_key": "role_owners",//字段key，因是覆盖更新，若只想修改rd角色，依旧需要将所有角色传入​

"field_value":[​

{​

"role":"rd",​

"owners":["testuser"]//user_key列表​

}​

]​

}​

]​

}

​

返回示例​

成功返回示例

错误返回示例

​

JSON

复制

{​

"err_code": 0,​

"err_msg": "",​

"err": {}​

}

​

​

错误码​

以下列出了该接口相关的错误码信息，若需查看更多通用错误码说明，参见 [Open API 错误码](../1p8d7djs/5aueo3jr)。​

​

err_code| err_msg| err.code| err.msg| 说明  
---|---|---|---|---  
20007| workItem has already in terminal status| 20007| 工作项已终止，无法修改| 工作项已终止，无法修改。  
30009| Field Not Found| 30009| field_value_pairs field key field_97d327:can not find field| 字段不存在。  
30005| WorkItem Not Found| 30005| WorkItem Not Found| 工作项找不到。  
50006| No right to edit| 50006| Unable to edit \"需求名称\"(name)| 无权限编辑该字段。  
20090| Your request has been blocked| 20090| Your request has been intercepted.| 无法更新字段。  
20050| Failed to check field| 20050| Due to the administrator configuration update| 由于管理员配置变更导致字段选项值失效了。  
50006| WorkItemValue Limit Exceeded| 50006| WorkItemValue Limit Exceeded| 字段值长度超出限制。  
10001| Operation Not Permitted| 10001| No Permission| 无权限操作。  
20090| Your request has been Intercept| 20090| field field_656741 is calculated| 不能更新计算字段。  
20014| Project And WorkItem Not Match| 20014| Project And WorkItem Not Match| project_key 和 work_item_type_key 所属空间不匹配。  
20007| WorkItem Is Already Aborted| 20007| Unable to operate on terminated work items| 工作项已终止，无法更新  
1000051743| Can not find user info| 1000051743| Can not find user info| 用户无效，肯呢个原因为 Header 中传入的  
X-USER-KEY 不正确，user_key 在飞书项目空间双击用户头像获取。  
10211| Token Info Is Invalid| 10211| token is nil| 使用的 Token 不正确或者已过期，请重新获取。  
  
​

注意事项​

1.

当请求参数中存在级联单选或级联多选字段时，传入的选项值需满足空间配置中该字段的“可选层级”配置。​




​

​​​

​

2.

写接口中选项类型字段的 field_value 应传入的是选项 id（value），而非选项的名称（label）。​




​

​​​

​

3.

角色和人员字段（role_owners）​




a.

流程角色配置的“允许用户自行增删”未勾选，使用创建和更新接口时，未传入该字段时会自动计算角色和成员的默认值。​




b.

流程角色配置的“允许用户自行增删”勾选，使用创建和更新接口时，未传入该字段时不会自动计算角色与成员的默认值。​




  * ​

​​​

​



4.

不支持模版、投票字段修改。​




​

​

上一篇

创建工作项

下一篇

批量更新工作项字段值
