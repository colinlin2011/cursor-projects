条件视图格式及常用示例

SearchGroup 筛选组合​

​

字段​| 类型​| 说明​  
---|---|---  
search_params​| list<​SearchParam>​| 筛选条件，包括筛选参数、操作符、筛选值。如：进行中节点，存在选项属于，待开始​  
conjunction​| string​| 枚举 And/Or，对应筛选器中的且和或​  
search_groups​| list<SearchGroup>​| 筛选组合，由多个筛选条件组成​  
  
​

SearchParam 筛选参数​

注意

筛选参数不支持字段类型为「公式计算」的字段​

​

​

字段 ​| 类型 ​| 说明 ​  
---|---|---  
param_key​| string​| 筛选条件可以是普通字段或一些特殊的字段（如角色和人员、进行中节点等控件）​若筛选条件是普通字段则为字段key（field_key ），若为特殊字段则对应的固定参数key。如进行中节点对应的key为：current_nodes，可参考下文​固定参数及取值，以及示例​  
value​| interface{}​| 搜索字段值结构，若参数为普通字段，则value格式为字段值格式。若参数key为特殊key，可参考下文​固定参数及取值，以及示例​  
operator​| string​| 操作符类型，枚举可参考下文​操作符枚举值，注意不同筛选参数支持的操作符不同​  
pre_operator​| string​| 前置操作符​前置操作符枚举值，每一组\存在一组，目前仅用于复合字段字段搜索场景​  
value_search_groups​| SearchGroup​| 出现条件：param_key为复合字段的「父字段」且operator为「满足/不满足」​内容：value_search_groups 中包含「复合字段子字段」的param_key、value、operator；value、operator跟随「复合字段子字段」param_key​注意：value_search_groups 内部目前不支持 pre_operato​  
  
​

​

​

​​​

​

筛选器中一行为一个SearchParam，一组为一个SearchGroup，具体筛选组合的书写方法可参考下文示例​常用条件请求体示例​

操作符枚举值​

​

Plain Text

复制

const {​

Reg = "~" //匹配​

NReg = "!~" //不匹配​

Eq = "=" //等于​

Ne = "!=" //不等于​

Lt = "<" //小于​

Gt = ">" //大于​

Lte = "<=" //小于等于​

Gte = ">=" //大于等于​

HasAnyOf = "HAS ANY OF" //存在选项属于​

HasNoneOf = "HAS NONE OF" //不存在选项属于​

IsNull = "IS NULL" //为空​

NotNull = "IS NOT NULL" //不为空​

Contains = "CONTAINS" //包含​

NotContains = "NOT CONTAINS" //不包含​

Meet = "MEET" //满足​

NotMeet = "NOT MEET" //不满足​

}​

​

前置操作符枚举值​

​

Plain Text

复制

const {​

Every = "EVERY" // 每一组​

Any = "ANY" // 存在一组​

}​

​

​

固定参数及取值​

📌

如果操作符选的是为空、不为空，不校验参数值（除流程节点时间、节点负责人、角色人员会校验参数值），只校验参数是否支持该操作符​

​

​

参数名​| 参数key（param_key）​| 操作符可取值（operator）​| 参数值类型​| 参数值（value）​| 说明​  
---|---|---|---|---|---  
工作项状态​| work_item_status​| "="、"!="、"HAS ANY OF"、"HAS NONE OF"​| list<string>​| 工作项状态​可从以下途径获取：​

1.​获取字段信息接口中work_item_status的options中获取​


2.​获取创建工作项元数据接口中的work_item_status字段的options中获取，选择对应的value​
| 工作项状态key列表。​如果要筛选终止状态的需求，"=","HAS ANY OF"这两个操作需要传closed；"!=","HAS NONE OF"这两个操作符不需要传closed，默认会过滤掉已终止的需求​需求：对应「需求状态」​​​​​​​其他工作项：对应「状态」​​​​​​​​  
模板id​| template​| "="、"!="、"HAS ANY OF"、"HAS NONE OF"、"IS NULL"、"IS NOT NULL"​| list<string>​| 模板id列表，可通过​获取工作项下的流程模板列表获取​| 模板id列表，可通过获取工作项下流程类型获取​筛选时对应「工作项类型」​​​​​​​​  
业务线​| business​| "="、"!="、"HAS ANY OF"、"HAS NONE OF"、"IS NULL"、"IS NOT NULL"​| list<string>​| 业务线id列表，可从​获取空间下业务线详情接口获取​| 业务线id列表，可通过获取空间下业务线详情获取​​  
更新时间​| updated_at​| "="、"!="、"<"、">"、"<="、">="​| string​| 标准UTC格式（2024-09-01T00:00:00+07:00）​| 日期、日期+时间类型的字段进行筛选时，时间表达需为标准UTC格式（2024-09-01T00:00:00+07:00）​这类字段通过openAPI处理，暂不支持时分秒级筛选，所填参数会统一处理为天级计算​  
  
​

自定义类型及取值​

若筛选条件是普通字段则param_key为字段key（field_key ），value为该字段值的格式。如筛选工作项名称中包含“重点”二字。则param_key为name（系统字段的字段key），操作符为 ​

📌

如果操作符选的是为空/不为空，不校验字段值，只校验当前字段类型是否支持该操作符​

​

​

参数类型​| 对应的字段类型Key（field_type_key）​| 操作符可取值​| 字段值类型​| 说明​  
---|---|---|---|---  
单行文本/多行文本​​| text​| "~"、"!~"、"="、"!="、"IS NULL"、"IS NOT NULL"​| string​| 匹配使用的是前后模糊匹配​  
数字​| number​| "="、"!="、"<"、">"、"<="、">="、"IS NULL"、"IS NOT NULL"​| float64​| 正常操作即可​  
链接​| link​| "~"、"!~"、"="、"!="、"IS NULL"、"IS NOT NULL"​| string​| 匹配链接的字符串​  
开关​| bool​​| "="、"!="、"IS NULL"、"IS NOT NULL"​| bool​| 搜索开关类型，如果想搜空值，需要使用"IS NULL"操作符​  
单值系统外信号​| signal​​| "="、"!="、"HAS ANY OF"、"HAS NONE OF"​| list<string>​​| 系统外信号，"undefined"表示暂无信息，"null"表示进行中，"false"表示未通过，"true"表示已通过;​  
单选​| select​​| "="、"!="、"HAS ANY OF"、"HAS NONE OF"、"IS NULL"、"IS NOT NULL"​| list<string>​​| 

  * 选项value值列表，(不是label)​



  * 可通过获取空间字段接口，拿到选项值列表​



  * 或者可通过「字段配置」「配置选项」来查看具体选项的id​

​​​​​​​​​​​​  
单选按钮​​| radio​| "="、"!="、"HAS ANY OF"、"HAS NONE OF"、"IS NULL"、"IS NOT NULL"​| list<string>​​| ​  
多选​| multi-select​| "="、"!="、"HAS ANY OF"、"HAS NONE OF"、"IS NULL"、"IS NOT NULL"、"CONTAINS"、"NOT CONTAINS"​| list<string>​​| ​  
级联单选​| tree-select​| "="、"!="、"HAS ANY OF"、"HAS NONE OF"、"IS NULL"、"IS NOT NULL"​| list<string>​​| ​  
级联多选​| tree-multi-select​| "="、"!="、"HAS ANY OF"、"HAS NONE OF"、"IS NULL"、"IS NOT NULL"​| list<string>​​| ​  
单选人员​| user​| "="、"!="、"HAS ANY OF"、"HAS NONE OF"、"IS NULL"、"IS NOT NULL"​| list<string>​| user_key列表​  
多选人员​| multi-user​| "="、"!="、"HAS ANY OF"、"HAS NONE OF"、"IS NULL"、"IS NOT NULL"、"CONTAINS"、"NOT CONTAINS"​| list<string>​| user_key列表​  
富文本​| multi-text​| "~"、"!~"、"IS NULL"、"IS NOT NULL"​| string​| 只会以无格式的值进行匹配​  
单选关联工作项​​| workitem_related_select​| "="、"!="、"HAS ANY OF"、"HAS NONE OF"、"IS NULL"、"IS NOT NULL"​| list<int64>​​| 关联的工作项id列表​  
多选关联工作项​| workitem_related_multi_select​| "="、"!="、"HAS ANY OF"、"HAS NONE OF"、"IS NULL"、"IS NOT NULL"、"CONTAINS"、"NOT CONTAINS"​| list<int64>​| 关联的工作项id列表​  
日期时间​| precise_date​| "<"、">"、"<="、">="、"IS NULL"、"IS NOT NULL"​| 字符串​| 要实现在区间的操作符，需重复传入时间参数两次，通过大于小于操作符的组合实现过滤​特殊说明：​日期、日期+时间类型的字段进行筛选时，时间表达需为标准UTC格式（2024-09-01T00:00:00+07:00）​这类字段通过openAPI处理，暂不支持时分秒级筛选，所填参数会统一处理为天级计算​  
日期​| date​| "<"、">"、"<="、">="、"IS NULL"、"IS NOT NULL"​| 字符串​| ​  
复合字段-父字段​| compound_field​| "IS NULL"、"IS NOT NULL" 、"MEET"、"NOT MEET"​| -​| "IS NULL"、"IS NOT NULL" 对应复合字段数据为空、不为空​"MEET"、"NOT MEET" ：​

  * 表示复合字段数据的子字段满足、不满足 value_search_groups 中对应的条件。​



  * 需要填写 value_search_groups ，填 要求见 「SearchParam 筛选参数」部分​



  * 需要填写 pre_operator ，填写要求见 「SearchParam 筛选参数」部分​

  
复合字段-子字段​| 支持本表格的自定义类型（除复合字段类型）​| 所有的自定义类型（除复合字段类型）对应的操作符​| 以上所有的自定义类型（除复合字段类型）对应的值类型​| 

  * 直接填写在 SearchParam 中时，支持填写 pre_operator。填写要求见 「SearchParam 筛选参数」部分。​



  * 填在在 value_search_groups 嵌套结构中时，不支持填写 pre_operator。​

  
  
​

常用条件请求体示例​

创建「需求下指定状态的」条件视图​

​

Plain Text

复制

{​

"project_key": "662e151cd7fd7XXXXXX74213",​

"work_item_type_key": "story",​

"name": "0116",​

"search_group":{​

"conjunction":"AND",​

"search_params":[​

{​

"param_key":"work_item_status",​

"value":["start"],​

"operator":"="​

}​

]​

}​

}​

​

创建「时间段内更新的工作项」条件视图​

​

Plain Text

复制

{​

"project_key": "662e151cd7fd7XXXXXX74213",​

"work_item_type_key": "story",​

"name": "0116",​

"search_group":{​

"conjunction":"AND",​

"search_params":[​

{​

"param_key":"updated_at",​

"value": "2024-01-02T15:04:05+07:00",​

"operator":">"​

},​

{​

"param_key":"updated_at",​

"value": "2024-01-05T15:04:05+07:00",​

"operator":"<"​

}​

]​

}​

}​

​

​

创建「使用了某个template的工作项」条件视图​

​

Plain Text

复制

{​

"project_key": "662e151cd7fd7XXXXXX74213",​

"work_item_type_key": "story",​

"name": "0116",​

"search_group":{​

"conjunction":"AND",​

"search_params":[​

{​

"param_key":"template",​

"value":["123","456"],​

"operator":"HAS ANY OF"​

}​

]​

}​

}​

​

​

创建「条件非终止和结束状态的需求」条件视图（终止状态默认不返回，所以不需要传closed）​

​

Plain Text

复制

{ ​

"project_key": "662e151cd7fd7XXXXXX74213",​

"work_item_type_key": "story",​

"name": "0116",​

"search_group":{​

"conjunction":"AND",​

"search_params":[​

{​

"param_key":"work_item_status",​

"value":["end"],​

"operator":"!="​

}​

]​

}​

}​

​

​

创建「业务线等于某个值或者不存在优先级属于P2」条件视图​

​

Plain Text

复制

{​

"project_key": "662e151cd7fd7XXXXXX74213",​

"work_item_type_key": "story",​

"name": "0116",​

"search_group":{​

"conjunction":"AND",​

"search_params":[​

{​

"param_key":"business",​

"value":["xxx"],​

"operator":"="​

}​

],​

"search_groups":[​

{​

"conjunction":"OR",​

"search_params":[​

{​

"param_key":"priority",​

"value":["2"],​

"operator":"HAS NONE OF"​

}​

]​

}​

]​

}​

}​

​

创建「提出时间大于等于且小于等于某时间范围,或更新时间提大于等于且小于等于某时间范围」条件视图​

​

​​​

​

对应筛选 JSON 格式​

​

JSON

复制

{​

"project_key": "662e151cd7fd7XXXXXX74213",​

"work_item_type_key": "story",​

"name": "0116",​

"search_group": {​

"conjunction": "OR",​

"search_groups": [​

{​

"conjunction": "AND",​

"search_params": [​

{​

"param_key": "start_time",​

"value": "2024-01-02T15:04:05+07:00",​

"operator": ">="​

},​

{​

"param_key": "start_time",​

"value": "2024-01-05T15:04:05+07:00",​

"operator": "<="​

}​

]​

},​

{​

"conjunction": "AND",​

"search_params": [​

{​

"param_key": "updated_at",​

"value": "2024-01-02T15:04:05+07:00",​

"operator": ">="​

},​

{​

"param_key": "updated_at",​

"value": "2024-01-05T15:04:05+07:00",​

"operator": "<="​

}​

]​

}​

]​

}​

}​

​

创建「筛选条件包含多层筛选组」条件视图​

​

​​​

​

对应筛选参数的格式​

​

JSON

复制

{​

"project_key": "662e151cd7fd7XXXXXX74213",​

"work_item_type_key": "story",​

"name": "0116",​

"search_group": {​

"conjunction": "AND",​

"search_params": [​

{​

"param_key": "priority",​

"value": [​

"2"​

],​

"operator": "HAS NONE OF"​

}​

],​

"search_groups": [​

{​

"conjunction": "OR",​

"search_params": [​

{​

"param_key": "start_time",​

"value": "2024-01-02T15:04:05+07:00",​

"operator": ">="​

},​

{​

"param_key": "start_time",​

"value": "2024-01-05T15:04:05+07:00",​

"operator": "<="​

}​

]​

},​

{​

"conjunction": "AND",​

"search_params": [​

{​

"param_key": "updated_at",​

"value": "2024-01-02T15:04:05+07:00",​

"operator": ">="​

},​

{​

"param_key": "updated_at",​

"value": "2024-01-05T15:04:05+07:00",​

"operator": "<="​

}​

]​

}​

]​

}​

}​

​

创建「创建者筛选」条件视图​

1.

通过 「​获取字段信息」API，获取到创建者的 field_key (字段ID)​




2.

搜过结构体参考一下格式，按需调整​




​

JSON

复制

{​

"project_key": "662e151cd7fd7XXXXXX74213",​

"work_item_type_key": "story",​

"name": "0116",​

"search_group": {​

"conjunction": "AND",​

"search_params": [​

{​

"param_key": "owner", // 通过 「获取空间字段」API，获取到的字段 ID​

"value": ["xxxxxx"], // userkey 组成的数组​

"operator": "HAS ANY OF"​

}​

]​

}​

} ​

​

创建「需求/工作项状态筛选」 条件视图​

​

JSON

复制

{​

"search_group": {​

"conjunction": "AND",​

"search_params": [​

{​

"param_key": "work_item_status", // 状态 key​

"value": [​

"started" // 状态ID(state_key)​

],​

"operator": "HAS ANY OF"​

}​

]​

}​

}​

​

创建「信号字段筛选」 条件视图​

​

JSON

复制

{ ​

"project_key": "662e151cd7fd7XXXXXX74213",​

"work_item_type_key": "story",​

"name": "0116",​

"search_group": {​

"conjunction": "AND",​

"search_params": [​

{​

"param_key":"field_b98105", //信号字段key​

"value":["true","false","null","undefined"], //信号目标值​

"operator":"HAS ANY OF"​

}​

]​

}​

}​

​

创建「复合字段数据为空的」条件视图​

​

JSON

复制

{​

"project_key": "662e151cd7fd7XXXXXX74213", ​

"work_item_type_key": "story", ​

"name": "empty compound field view",​

"search_group":{​

"conjunction":"AND",​

"search_params":[​

{​

"param_key":"field_ba8f2e",​

"operator":"IS NULL"​

}​

]​

}​

}​

​

创建「复合字段数据 每一组 文本子字段都等于1 的」条件视图​

​

JSON

复制

{​

"project_key": "662e151cd7fd7XXXXXX74213", ​

"work_item_type_key": "story", ​

"name": "every compound child field equal 1",​

"search_group":{​

"conjunction":"AND",​

"search_params":[​

{​

"param_key":"field_ba8f2e", // 复合字段-父字段​

"operator":"MEET",​

"pre_operator": "EVERY",​

"value_search_groups": {​

"conjunction":"AND",​

"search_params":[​

{​

"param_key":"field_4396f8", // 复合字段-子字段，类型为文本​

"operator":"=",​

"value": "1"​

}​

]​

}​

}​

]​

}​

}​

​

或​

​

JSON

复制

{​

"project_key": "662e151cd7fd7XXXXXX74213", ​

"work_item_type_key": "story", ​

"name": "every compound child field equal 1",​

"search_group":{​

"conjunction":"AND",​

"search_params":[​

{​

"param_key":"field_4396f8", // 复合字段-子字段，类型为文本​

"operator":"=",​

"pre_operator": "EVERY",​

"value": "1"​

]​

}​

}​

​

创建「复合字段数据 存在一组 文本子字段都等于1」条件视图​

​

JSON

复制

{​

"project_key": "662e151cd7fd7XXXXXX74213", ​

"work_item_type_key": "story", ​

"name": "any compound child field equal 1",​

"search_group":{​

"conjunction":"AND",​

"search_params":[​

{​

"param_key":"field_ba8f2e", // 复合字段-父字段​

"operator":"MEET",​

"pre_operator": "ANY",​

"value_search_groups": {​

"conjunction":"AND",​

"search_params":[​

{​

"param_key":"field_4396f8", // 复合字段-子字段，类型为文本​

"operator":"=",​

"value": "1"​

}​

]​

}​

}​

]​

}​

}​

​

或​

​

JSON

复制

{​

"project_key": "662e151cd7fd7XXXXXX74213", ​

"work_item_type_key": "story", ​

"name": "any compound child field equal 1",​

"search_group":{​

"conjunction":"AND",​

"search_params":[​

{​

"param_key":"field_4396f8", // 复合字段-子字段，类型为文本​

"operator":"=",​

"pre_operator": "ANY",​

"value": "1"​

]​

}​

}​

​

上一篇

删除视图

下一篇

获取度量图表明细数据
