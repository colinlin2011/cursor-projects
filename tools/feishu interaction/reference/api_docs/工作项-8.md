创建工作项

该接口用于在指定空间和工作项类型下新增一个“工作项实例”，对应的平台功能介绍，如创建需求实例的平台功能可参考​新建需求，对应的权限申请在 权限管理-工作项 分类下，相关功能介绍详见​权限管理。​

​

​​​

​

请求说明​

  * 请求方式：POST​



  * 请求地址：/open_api/:project_key/work_item/create​



请求参数​

Header​

接口调用的 Header 配置详见 [Header](../1p8d7djs/4bsmoql6#a8e43b86)。​

Path​

​

参数| 类型| 是否必须| 说明  
---|---|---|---  
project_key| string| 必须| 空间 ID（project_key），或者空间域名（simple_name）。

  * 空间 ID（project_key），在飞书项目空间双击空间名称获取。
  * 空间域名（simple_name），simple_name 一般在飞书项目空间 URL 中获取。例如空间 URL 为 “https://project.feishu.cn/doc/overview”，则 simple_name为 “doc”。

  
  
​

Body​

​

参数| 类型| 是否必须| 说明  
---|---|---|---  
work_item_type_key| string| 必须| 工作项类型，可以从[获取空间下工作项类型](../1p8d7djs/3pjp854w)接口获取。  
field_value_pairs| list<object>| 可选| 配置工作项的字段，符合[FieldValuePair](../1p8d7djs/1x1d372l#10c42182)结构规范，创建工作项的具体字段可以从[获取创建工作项元数据](../1p8d7djs/2jhqmwhn)接口中获取。  
template_id| int64| 可选| 工作项流程模板 ID，未传值时默认使用该工作项类型的第一个流程模板。可通过以下方式获取：

  * 从[获取创建工作项元数据](../1p8d7djs/2jhqmwhn)接口中的 template 字段的 options 中获取，选择对应的 value；
  * 从[获取工作项下的流程模板列表](../1p8d7djs/3pq8jlhd)接口的 template_id 获取；
  * 从[获取字段信息](../1p8d7djs/3tsposa2)接口中的 template 字段的 options 中获取，选择对应的 value。

  
name| string| 可选| 工作项名称  
  
​

返回参数​

​

参数| 类型| 说明  
---|---|---  
data| int64| 返回工作项 ID  
err| object| 请求成功时返回空值，请求失败时返回实际错误信息。  
err_msg| string| 请求成功时返回空值，请求失败时返回实际错误信息。  
err_code| int32| 请求成功时0，请求失败返回实际错误码。  
  
​

请求示例​

创建节点流工作项

创建状态流工作项

请求路径：/open_api/68382b399de4b0ec6c5axxxx/work_item/create​

​

JSON

复制

{ ​

"work_item_type_key": "story",//工作项类型 ​

"template_id": 123123,//流程模板id ​

"name":"2333",//工作项名称 ​

"field_value_pairs": [ ​

{ ​

"field_key": "description",//字段key，选择范围为工作项元数据中获取的字段全集 ​

"field_value": "2333"//字段值，作为请求参数必填；value填写规则取决于字段类型，不同类型的规则可见​

}, ​

{ ​

"field_key":"priority",//如优先级字段的字段类型为选项（field_type_key=select），则在格式中找到select的填写方式 ​

"field_value":{ ​

"value":"xxxxxx"//字段类型为选项时，写接口传入的参数应为选项id，而非选项值。 ​

} ​

}, ​

{ ​

"field_key": "role_owners", ​

"field_value":[ ​

{ ​

"role":"rd", ​

"owners":["testuser"]//user_key列表 ​

} ​

] ​

} ​

] ​

}

​

​

返回示例​

成功返回示例

错误返回示例

​

JSON

复制

{​

"data": 19781, // 工作项 ID​

"err": {},​

"err_msg": "",​

"err_code": 0​

}

​

​

错误码​

以下列出了该接口相关的错误码信息，若需查看更多通用错误码说明，参见 [Open API 错误码](../1p8d7djs/5aueo3jr)。​

​

err_code| err_msg| err.code| err.msg| 说明  
---|---|---|---|---  
30014| WorkItem Type Not Found| 30014| Work item not found| work_item_type_key 不正确，请通过[获取空间下工作项类型](../1p8d7djs/3pjp854w)接口获取。  
50006| Failed to process role owners| 50006| Failed to process role owners| 角色与人员解析失败，即传入的人员信息不正确。  
50006| Current Template is Disable| 50006| Current template has been banned| 当前模版被禁用。  
50006| Template not found| 50006| template not found| 找不到对应的模板，请输入正确的 template_id。  
30014| WorkItemTypeKey Not Found| 30014| Work item not found| 工作项类型不存在，请传入正确的 work_item_type_key。  
20083| "Duplication Field Exist| 20083| 20083| 创建工作项时，传入的字段重复。  
  
​

注意事项​

1.

当请求参数中存在级联单选或级联多选字段时，传入的选项值需满足空间配置中该字段的“可选层级”配置。​




​

​​​

​

2.

创建和更新工作项接口中选项类型字段的field_value应传入的是选项id（value），而非选项的名称（label）。​




  * ​

​​​

​



​

3.

角色和人员字段（role_owners）​




a.

流程角色配置的“允许用户自行增删”未勾选，使用创建和更新接口时，未传入该字段时会自动计算角色和成员的默认值。​




b.

流程角色配置的“允许用户自行增删”勾选，使用创建和更新接口时，未传入该字段时不会自动计算角色与成员的默认值。​




  * ​

​​​

​



4.

参数补充说明​




a.

在 name 传参不为空，且 field_value_pairs 中包含 field_key 为 name 的对象时，会报错。​




b.

field_value_pairs 中不允许出现 field_key 为 template_id 的对象，出现则报错。​




上一篇

获取创建工作项元数据

下一篇

更新工作项
