获取指定节点/状态流转所需必填信息

该接口用于获取一个工作项实例指定节点流转或状态流转所需的必填信息。通过传入节点的 node_id 或状态流转的目标状态 key，返回包括必填表单项、必填节点字段、必填子任务、必填交付物在内的必填信息。该接口仅支持单点查询，对应的权限申请在权限管理-工作项实例分类下，相关功能介绍详见​权限管理。​

请求说明​

  * 请求方式：POST​



  * 请求地址：/open_api/work_item/transition_required_info/get​



请求参数​

Header​

接口调用的 Header 配置详见 [Header](../1p8d7djs/4bsmoql6#a8e43b86)。​

Body​

​

参数| 类型| 是否必须| 说明  
---|---|---|---  
project_key| string| 必须| 空间 ID（project_key），或者空间域名（simple_name）。

  * 空间 ID（project_key），在飞书项目空间双击空间名称获取。
  * 空间域名（simple_name），simple_name 一般在飞书项目空间 URL 中获取。例如空间 URL 为 “https://project.feishu.cn/doc/overview”，则 simple_name为 “doc”。

  
work_item_type_key| string| 可选| 工作项类型，可以通过[获取空间下工作项类型](../1p8d7djs/3pjp854w)接口获取。  
work_item_id| int64| 必须| 工作项实例 ID，在工作项实例详情中，展开右上角 **··· > ID** 获取。  
state_key| string| 必须| 流转时的节点标识，其含义根据工作流类型不同而有所区别：

  * 节点流：表示节点 ID（或称 node_key、state_key）；
  * 状态流：表示状态流流转的目标状态 key；

可通过[获取工作流详情](../1p8d7djs/5hcmcl04)查询具体值。  
mode| string| 可选| 查询模式，默认查询所有必填项。支持的取值如下所示。

  * unfinished：仅查询**必填项** 中未完成的信息。

  
  
​

返回参数​

​

参数| 类型| 说明  
---|---|---  
data| object| 返回结果，遵循[TransRequiredInfo](../1p8d7djs/1x1d372l#a13386bd)结构规范  
err| object| 部分错误透出更详细的错误描述，可协助日志记录和问题反馈  
err_msg| string| 错误信息  
err_code| int32| 错误码  
  
​

请求示例​

节点流请求示例

状态流请求示例

仅查询未填项

​

JSON

复制

{​

"project_key": "67da75df68c96514c210xxxx",​

"work_item_type_key": "story",​

"work_item_id": 126027xxxx,​

"state_key": "doing"​

}

​

​

返回示例​

节点流返回示例

状态流返回示例

仅查询未填写项

错误返回示例

​

JSON

复制

{​

"err": {},​

"err_code": 0,​

"err_msg": "",​

"data": {​

"form_items": [ // 表单必填项​

{ // “节点信息控件”信息​

"finished": false,​

"field_type_key": "",​

"state_info": {​

"state_key": "end", // “节点信息控件”关联的节点ID​

"node_fields": [ // “节点信息控件”中必填的节点信息​

{​

"field_key": "owner", // owner-节点负责人必填​

"field_type_key": "multi-user",​

"finished": false​

},​

{​

"field_key": "schedule", // schedule-节点排期必填​

"field_type_key": "schedule",​

"finished": false​

}​

]​

},​

"class": "control", // 表单项类型，control-控件​

"key": "workflow_state_info" // 表单项key，节点信息控件固定为 workflow_state_info​

},​

{​

"class": "field", // 表单项类型，field-实例字段​

"key": "field_17eb64", // 字段ID​

"finished": false, // 是否已经填写​

"field_type_key": "compound_field", // 实例字段类型​

"sub_field": [ // 若实例字段是复合字段或多人复合字段，罗列必填子字段信息​

{​

"field_key": "field_7e2c75", // 必填子字段ID​

"field_type_key": "text", // 必填子字段类型​

"finished": true // 该必填子字段是否已经填写​

},​

{​

"finished": true,​

"field_key": "field_289d9d",​

"field_type_key": "select"​

}​

]​

},​

{​

"field_type_key": "select",​

"class": "field",​

"key": "priority",​

"finished": false​

},​

{​

"class": "field",​

"key": "description",​

"finished": false,​

"field_type_key": "multi-text"​

},​

{​

"sub_field": [​

{​

"not_finished_owner": [​

"7064779165592993xxxx"​

],​

"field_key": "field_70c101",​

"field_type_key": "text",​

"finished": false​

},​

{​

"field_key": "field_f4d091",​

"field_type_key": "select",​

"finished": false,​

"not_finished_owner": [​

"7064779165592993xxxx"​

]​

}​

],​

"class": "field",​

"key": "field_785d4d",​

"finished": false,​

"field_type_key": "multi_user_compound_field"​

}​

],​

"tasks": [ // 流转节点之前必须完成的子任务​

{​

"task_id": 12592****, // 子任务ID​

"finished": false // 子任务是否已经完成​

}​

],​

"deliverables": [ // 流转节点前必须完成的交付物​

{​

"finished": false, // 交付物是否已经完成​

"deliverable_id": 123 // 交付物ID​

}​

],​

"node_fields": [ // 流转节点前必须填写的节点字段​

{​

"field_key": "node_field_716f7a", // 节点字段ID​

"field_type_key": "multi_user_compound_field", // 节点字段类型​

"finished": false, // 节点字段是否已经填写​

"sub_field": [ // 节点多人复合字段的必填子字段​

{​

"field_key": "node_field_5155a5", // 必填子字段ID​

"field_type_key": "select", // 必填子字段类型​

"finished": false, // 必填子字段是否已经填写​

"not_finished_owner": [ // 还未填写该子任务的节点负责人​

"7064779165592993xxxx"​

]​

},​

{​

"field_key": "node_field_fafcac",​

"field_type_key": "multi-text",​

"finished": false,​

"not_finished_owner": [​

"7064779165592993xxxx"​

]​

}​

]​

}​

]​

}​

}

​

​

错误码​

以下列出了该接口相关的错误码信息，若需查看更多通用错误码说明，参见 [Open API 错误码](../1p8d7djs/5aueo3jr)。​

​

err_code| err_msg| err.code| err.msg| 说明  
---|---|---|---|---  
30005| WorkItem Not Found| 30005| WorkItem Not Found| work_item_id 不正确，请检查。  
50006| This node no longer exists| 50006| This node no longer exists| 传入的 state_key 不正确，请可通过[获取工作流详情](/1p8d7djs/5hcmcl04)查询具体值。  
  
​

上一篇

状态流转

下一篇

获取指定的子任务列表（跨空间）
