获取指定的工作项列表（单空间-复杂传参）

该接口用于在指定空间，搜索符合“复杂筛选条件”的工作项实例。对应的权限申请在 权限管理-工作项 分类下，相关功能介绍详见​权限管理。​

请求说明​

  * 请求方式：POST​



  * 请求地址：/open_api/:project_key/work_item/:work_item_type_key/search/params​



请求参数​

Header​

接口调用的 Header 配置详见 [Header](../1p8d7djs/4bsmoql6#a8e43b86)。​

Path​

​

参数| 类型| 是否必须| 说明  
---|---|---|---  
project_key| string| 必须| 空间 ID（project_key），或者空间域名（simple_name）。

  * 空间 ID（project_key），在飞书项目空间双击空间名称获取。
  * 空间域名（simple_name），simple_name 一般在飞书项目空间 URL 中获取。例如空间 URL 为 “https://project.feishu.cn/doc/overview”，则 simple_name为 “doc”。

  
work_item_type_key| string| 必须| 工作项类型，系统自动生成，可通过[获取空间下工作项类型](../1p8d7djs/3pjp854w)接口获取  
  
​

Body​

​

参数| 类型| 是否必须| 说明  
---|---|---|---  
search_group| object| 必须| 筛选条件（支持上限最多50个），用于组合条件搜索时使用。遵循[SearchGroup](../1p8d7djs/1x1d372l#a889b622)结构规范，可参考[搜索参数格式及常用示例](../1p8d7djs/1l8il0l6)。  
page_size| int64| 可选| 每页返回的数据条数，最大值为 50，默认按照工作项 ID 排序。  
分页设置不能控制总返回数量，查询结果超过 5000 会报错。  
page_num| int64| 可选| 分页页码，从1开始，默认为1  
fields| list<string>| 可选| 定义需要返回的字段，非必填，默认返回全部。字段格式可查看[字段与属性解析格式](../1p8d7djs/1tj6ggll)。支持两种模式，两种模式不可混用。

  * 指定字段模式：仅返回节点表单 fields 中列出的字段。如 ["name", "created_at"]，表示只返回 name 和 created_at 字段及相关信息。
  * 排除字段模式：以 - 开头的字段表示排除该字段。如 ["-name", "-created_at"]，表示返回除 name 和 created_at 外的所有字段及相关信息。

  
expand| object| 可选| 额外参数。  
  
​

返回参数​

​

参数| 类型| 说明  
---|---|---  
data| list<object>| 最多只能查询到5000条数据，超过请自行用过滤条件减少匹配的工作项数目。  
pagination| object| 分页信息  
err| object| 请求成功时返回空值，请求失败时返回实际错误信息。  
err_msg| string| 请求成功时返回空值，请求失败时返回实际错误信息。  
err_code| int32| 请求成功时返回0，请求失败返回实际错误码。  
  
​

请求示例​

查询节点流工作项列表

查询带工作流的工作项列表

请求路径：POST /open_api/5679495396xxxx/work_item/story/search/params​

​

JSON

复制

{​

"search_group": {​

"conjunction": "AND",​

"search_params": [​

{​

"param_key": "work_item_id",​

"value": [​

12918xxxx​

],​

"operator": "HAS ANY OF"​

}​

],​

"search_groups": []​

},​

"page_num": 1,​

"page_size": 10,​

"fields": [],​

}

​

​

返回示例​

查询节点流工作项列表

查询带工作流的工作项列表

错误返回示例

​

JSON

复制

{​

"data": [​

{​

"id": 1,​

"name": "item1",​

"work_item_type_key": "story",​

"project_key": "60acd5610444ba031b50xxxx",​

"simple_name": "test",​

"template_type": "control",​

"pattern": "Node",​

"sub_stage": "started",​

"work_item_status": {},​

"current_nodes": [​

{​

"id": "state_1",​

"name": "node1",​

"owners": [​

"701251455513382xxxx"​

]​

}​

],​

"created_by": "7009146719661228031",​

"updated_by": "7009146719661228031",​

"created_at": 1633776613033,​

"updated_at": 1633776613033,​

"fields": [​

{​

"field_alias": "",​

"field_key": "aborted",​

"field_type_key": "aborted",​

"field_value": {​

"is_aborted": false,​

"reason": ""​

}​

},​

{​

"field_alias": "",​

"field_key": "role_owners",​

"field_type_key": "role_owners",​

"field_value": [​

{​

"owners": [​

"701251455518415xxxx"​

],​

"role": "uiouiouio"​

},​

{​

"owners": null,​

"role": "test"​

},​

{​

"owners": null,​

"role": "tt"​

}​

]​

}​

]​

}​

],​

"err": {},​

"err_msg": "",​

"err_code": 0,​

"pagination": {​

"page_num": 1,​

"page_size": 10,​

"total": 1​

}​

}

​

​

错误码​

以下列出了该接口相关的错误码信息，若需查看更多通用错误码说明，参见 [Open API 错误码](../1p8d7djs/5aueo3jr)。​

​

err_code| err_msg| err.code| err.msg| 说明  
---|---|---|---|---  
20069| Search Param Value Error| 20069| field_10ce0a: param type must be []string| 搜索传入的参数值异常  
30001| Data Not Found| 30001| Data Not Found| 数据不存在  
20068| Search Param Is Not Support| 20068| :unSupport to search| 指定的参数不支持筛选  
20094| Search Result Bigger Than 5000, Please Check Your Search Params| 20094| Search Result Limit| 查询结果超过5000个，请重新设置筛选条件  
30014| WorkItem Type Not Found| 30014| WorkItemTypeKey Not Found Or No Permission| 工作项类型不存在或者没有权限  
50006| OperateFail Please Contact Platform| 50006| elastic: Error 502 (Bad Gateway)| 操作失败，请联系技术支持  
20072| Conjunction Value Only Support 「AND」、「OR」| 20072| Conjunction Value Only Support 「AND」、「OR」| 搜索的 Conjunction 仅支持且、或  
20003| Wrong WorkItemType Param| 20003| need_workflow| 

  * 获取指定的工作项列表：work_item_type_keys未填
  * 获取工作项详情/获取指定的工作项列表等接口，目标工作项为状态流，但是设置了"expand"参数:{ "need_workflow":true}

  
20071| Search People Not Support Issue| 20071| Search People Not Support Issue| 搜索指定参数是 people 时，不支持缺陷工作项  
20065| Search Param Key Not Support StateFlow : Param Key is | 20065| stateflow| 当前参数不支持状态流筛选  
20063| Search Operator Error| 20063| Operator:{HAS} Is Not Support By Param {field_b97fe3}| 搜索的操作错误，不同的参数可使用的操作符不同  
20064| Search Option Size Too Large| 20064| business: list large than 50| 搜索指定的选项个数超过限制，最多可传入50个选项值  
30005| WorkItem Not Found| 30005| WorkItem Not Found| 工作项未找到，可能是工作项已删除、查询的工作项 id 不正确、查询的工作项类型和工作项 id 不匹配  
20067| Search Signal Not Support Value :| 20067| 7163505151318310940| 搜素系统外信号，传入的值不支持筛选  
  
​

上一篇

获取指定的工作项列表（跨空间）

下一篇

获取指定的工作项列表（全局搜索）
